<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta name="description" content="Patrick Collins-区块链学习笔记">
  
  <title>
    Vue 3.0 笔记 |
    
    LRay的博客
  </title>
  <!-- Icon -->
  
    <link rel="shortcut icon" href="/favicon.ico">
    
  
<link rel="stylesheet" href="/css/style.css">

  
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <main class="content" >
    <section class="outer" style="min-height: 90vh;">
  <article  id="post-Vue3_note" class="article article-type-post" itemscope
            itemprop="blogPost" data-scroll-reveal>

            <div class="article-inner" 
              <header class="article-header">
                
  
  <h1 class="article-title" itemprop="name">
    Vue 3.0 笔记
  </h1>
  
  

              </header>
              

                
                  <div class="article-meta">
                    <a href="/2024/03/17/Vue3_note/" class="article-date">
  <time datetime="2024-03-17T06:11:40.000Z" itemprop="datePublished">2024-03-17</time>
</a>
                      
<div class="article-category">
  <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
</div>

                  </div>
                  

                    
                      
<div class="tocbot" style="font-size: medium;"></div>

                        

                          <div class="article-entry" itemprop="articleBody">
                            


                              

                                <!--  -->
                                
                                          <p>​	Vue3.0的入门笔记，特色的compositionAPI写法，可读性和可维护性得到了大幅的提升，再加上各种组件库的支持，文档齐全，非常便于使用。</p>
<span id="more"></span>

<blockquote>
<ul>
<li>Created by Typora</li>
<li>Author: LRay-iu</li>
<li>createTime: 2024-01-05 09:00</li>
<li>updateTime: 2024-03-17 23:39</li>
</ul>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>因为我是先前并没有接触Vue3，因此这份笔记很基础很基础，尽量都写成傻瓜式的了，当然也有可能有些地方写的不是很清楚，毕竟最初的目的就是为了写给我自己看的，至于之后会不会再深入学习Typescript和Javascript，这谁又晓得呢？反正我修燃气用是不上这个。</p>
<h2 id="工具包"><a href="#工具包" class="headerlink" title="工具包"></a>工具包</h2><p>课程链接：【尚硅谷Vue3入门到实战，最新版vue3+TypeScript前端开发教程】 <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Za4y1r7KE/?share_source=copy_web&vd_source=d4c8e690ada3240d323ff6b395a76451">https://www.bilibili.com/video/BV1Za4y1r7KE/?share_source=copy_web&amp;vd_source=d4c8e690ada3240d323ff6b395a76451</a></p>
<h2 id="Vue3简介"><a href="#Vue3简介" class="headerlink" title="Vue3简介"></a>Vue3简介</h2><p>Vue3，截止至2023年10月，最新公开版本为3.3.4</p>
<h2 id="Vue创建工程"><a href="#Vue创建工程" class="headerlink" title="Vue创建工程"></a>Vue创建工程</h2><h3 id="基于vite创建"><a href="#基于vite创建" class="headerlink" title="基于vite创建"></a>基于vite创建</h3><p>新的前端构建工具，特点如下：</p>
<blockquote>
<ul>
<li>热重载</li>
<li>对<code>TS</code>、<code>JSX</code>、<code>CSS</code>支持开箱即用</li>
<li>按需编译</li>
</ul>
</blockquote>
<p>webpack与vite构建对比图如下：</p>
<img src="/2024/03/17/Vue3_note/image-20240105103235439.png" alt="image-20240105103235439">

<p>终端创建指令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm create vue@latest</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/17/Vue3_note/image-20240423215020646.png" alt="image-20240423215020646"></p>
<p><img src="/2024/03/17/Vue3_note/image-20240105104452696.png" alt="image-20240105104452696"></p>
<h3 id="工作目录介绍"><a href="#工作目录介绍" class="headerlink" title="工作目录介绍"></a>工作目录介绍</h3><ul>
<li>&#x2F;<strong>public</strong><br>  用于存放网页顶端的图标</li>
</ul>
<p><img src="/2024/03/17/Vue3_note/image-20240105104835729.png" alt="image-20240105104835729"></p>
<ul>
<li><p>&#x2F;<strong>src</strong><br>  工作目录</p>
</li>
<li><p>&#x2F;<strong>node_modules</strong></p>
<p>  执行<code>npm i</code>，下载依赖，会生成<code>node_modules</code>这个文件夹<br>  作用：写了前端常用文件（如.jpg,.txt）等等，再通过<code>env.d.ts</code>中的以下代码告诉Vue</p>
</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference types=&quot;vite/client&quot; /&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>&#x2F;index.html</strong><br>  入口文件</p>
</li>
<li><p>&#x2F;<strong>package.json</strong><br>  包的声明文件</p>
</li>
<li><p>&#x2F;<strong>vite.config.ts</strong><br>  工程的配置文件，配置插件等等</p>
</li>
<li><p><strong>&#x2F;src&#x2F;components</strong><br>  用于存放组件</p>
</li>
</ul>
<p><img src="/2024/03/17/Vue3_note/image-20240105120758018.png" alt="image-20240105120758018"></p>
<h2 id="编写一个App组件"><a href="#编写一个App组件" class="headerlink" title="编写一个App组件"></a>编写一个App组件</h2><p>在main.ts中</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/main.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><code>createApp</code>:一个用于“造花盆”的方法</p>
<p><code>App</code>：从<code>App.vue</code>中引用，是一个根组件，可以看作是一朵花，包括之后写的<code>A.vue</code>、<code>B.vue</code>，其实都是安装在根组件上的组件，类似“花上的叶子”，它们直接或间接下载在<code>App.vue</code>上</p>
<p><code>createApp(App).mount(&#39;#app&#39;)</code>：将app传入<code>createApp()</code>中，创建一个名叫App的互联网应用，并且它的根组件叫<code>App</code>；<code>mount</code>：挂载，将App摆在名为app的容器中。</p>
<p>vue组件中，包含以下内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">        &lt;hl&gt;你好&lt;/hl&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">//  JS或者TS</span><br><span class="line">export default&#123;</span><br><span class="line">    name:&#x27;App&#x27; //组件名</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">/* 样式 */</span><br><span class="line">.app&#123;</span><br><span class="line">    background-color: #ddd;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>之后运行 <code>npm run dev</code>，<code>在 Local:   http://localhost:5173/</code>中查看</p>
<p><img src="/2024/03/17/Vue3_note/image-20240105155229131.png" alt="image-20240105155229131"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li><code>vite</code>项目中，<code>index.html</code>是项目的入口文件，在项目最外层</li>
<li>加载<code>index.html</code>后，<code>vite</code>会解析<code>&lt;script type=&quot;module&quot; src=&quot;/src/main.ts&quot;&gt;&lt;/script&gt;</code>指向的js</li>
<li>vue3是通过createApp的函数创建一个应用实例</li>
</ul>
<h2 id="OptionAPI"><a href="#OptionAPI" class="headerlink" title="OptionAPI"></a>OptionAPI</h2><p>这是Vue2的语法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Vue2 写法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名:&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄:&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span>修改年龄<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showTel&quot;</span>&gt;</span>联系方式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,<span class="comment">//组件名</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tel</span>: <span class="string">&#x27;18019328622&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">tel</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在’枝干组件’<code>App.vue</code>中导入并引用</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Person</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Person.vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,<span class="comment">//组件名</span></span><br><span class="line">    <span class="attr">components</span>: &#123; <span class="title class_">Person</span> &#125;<span class="comment">//注册组件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- html --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hl</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">hl</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Person</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果如下</p>
<p><img src="/2024/03/17/Vue3_note/image-20240108173531398.png" alt="image-20240108173531398"></p>
<h3 id="弊端"><a href="#弊端" class="headerlink" title="弊端"></a>弊端</h3><p>optionAPI的语法弊端不难看出，数据、方法、计算属性都是分散在data、methods、computed中，想要新增功能就需要对上述进行修改，这显然是不便于维护和复用的。</p>
<h2 id="compositionAPI"><a href="#compositionAPI" class="headerlink" title="compositionAPI"></a>compositionAPI</h2><h3 id="setup概述"><a href="#setup概述" class="headerlink" title="setup概述"></a>setup概述</h3><p>与optionalAPI不同，compositionAPI将组件的数据、方法、计算属性集中在一个名为setup()的方法中，写法如下：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,<span class="comment">//组件名</span></span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//setup中的this是undefined，vue3中已经开始弱化this了</span></span><br><span class="line">        <span class="comment">//数据</span></span><br><span class="line">        <span class="comment">//此时的name，age，tel不是响应式的</span></span><br><span class="line">        <span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">        <span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line">        <span class="keyword">let</span> tel = <span class="string">&#x27;18019328622&#x27;</span></span><br><span class="line">        <span class="comment">//方法</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span><br><span class="line">            name = <span class="string">&#x27;李四&#x27;</span>  <span class="comment">//name确实修改了，但不是响应式的</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span><br><span class="line">            age += <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(tel)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//必须要给予一个返回值，否则外部接收不到这些数据</span></span><br><span class="line">        <span class="keyword">return</span> &#123; name, age, changeName, changeAge, showTel &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>值得一提的是，vue2中的选项式语法和vue3中的新语法是可以同时出现的，并且由于setup的执行优先级高于optionalAPI中的内容，这导致optinalAPI中的内容可以访问到setup中的数据变量，但setup不能访问到optionalAPI中的数据变量，用例如下：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,<span class="comment">//组件名</span></span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeCreate&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">a</span>: <span class="variable language_">this</span>.<span class="property">name</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//setup中的this是undefined，vue3中已经开始弱化this了</span></span><br><span class="line">        <span class="comment">//数据</span></span><br><span class="line">        <span class="comment">//此时的name，age，tel不是响应式的</span></span><br><span class="line">        <span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">        <span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line">        <span class="keyword">let</span> tel = <span class="string">&#x27;18019328622&#x27;</span></span><br><span class="line">        <span class="comment">//方法</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span><br><span class="line">            name = <span class="string">&#x27;李四&#x27;</span>  <span class="comment">//name确实修改了，但不是响应式的</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span><br><span class="line">            age += <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(tel)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123; name, age, changeName, changeAge, showTel &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/17/Vue3_note/image-20240108233851273.png" alt="image-20240108233851273"></p>
<h3 id="setup的语法糖"><a href="#setup的语法糖" class="headerlink" title="setup的语法糖"></a>setup的语法糖</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,<span class="comment">//组件名</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> age = <span class="number">18</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> tel = <span class="string">&#x27;18019328622&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//方法</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    name = <span class="string">&#x27;李四&#x27;</span>  <span class="comment">//name确实修改了，但不是响应式的</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    age += <span class="number">1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">alert</span>(tel)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>像这样编写可以不用写setup的返回值</p>
<h4 id="插件配置方法"><a href="#插件配置方法" class="headerlink" title="插件配置方法"></a>插件配置方法</h4><p>如果想将上述合二为一，可以下载插件，指令 <code>npm i vite-plugin-vue-setup-extend -D</code></p>
<p>在<code>vite.config.ts</code>中进行配置插件，<strong>其他插件方法也是类似</strong></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title class_">VueSetupExtend</span>()</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: <span class="title function_">fileURLToPath</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;./src&#x27;</span>, <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>最后对上述两个script合二为一</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span> setup name=<span class="string">&quot;Person123&quot;</span>&gt;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> tel = <span class="string">&#x27;18019328622&#x27;</span></span><br><span class="line"><span class="comment">//方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    name = <span class="string">&#x27;李四&#x27;</span>  <span class="comment">//name确实修改了，但不是响应式的</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span><br><span class="line">    age += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(tel)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img src="/2024/03/17/Vue3_note/image-20240109132721613.png" alt="image-20240109132721613"></p>
<h2 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h2><p>响应式:能够实时变化的数据</p>
<h3 id="响应式数据"><a href="#响应式数据" class="headerlink" title="响应式数据"></a>响应式数据</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//引用</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//包裹</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span><br><span class="line"><span class="keyword">let</span> tel = <span class="string">&#x27;18019328622&#x27;</span></span><br><span class="line"><span class="comment">//方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    name.<span class="property">value</span> = <span class="string">&#x27;李四&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span><br><span class="line">    age.<span class="property">value</span> += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(tel)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>觉得频繁写.value很麻烦？不妨试试volar</p>
<img src="/2024/03/17/Vue3_note/image-20240128222423403.png" align="left">
</blockquote>
<h3 id="响应式对象"><a href="#响应式对象" class="headerlink" title="响应式对象"></a>响应式对象</h3><p>响应式对象:被<code>reactive</code>包裹过后的对象</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">    <span class="comment">//data</span></span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123; <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;)</span><br><span class="line">    <span class="keyword">let</span> games = <span class="title function_">reactive</span>([</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;0000001&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;AAA1&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;0000001&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;AAA1&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;0000001&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;AAA1&#x27;</span>&#125;</span><br><span class="line">    ])</span><br><span class="line">    <span class="keyword">let</span> obj =<span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">a</span>:&#123;</span><br><span class="line">            <span class="attr">b</span>:&#123;</span><br><span class="line">                <span class="attr">c</span>:<span class="number">666</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">changePrice</span>(<span class="params"></span>)&#123;</span><br><span class="line">        car.<span class="property">price</span> +=<span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>)&#123;</span><br><span class="line">        games[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;BBB1&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">changeObj</span>(<span class="params"></span>)&#123;</span><br><span class="line">        obj.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span> = <span class="number">999</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="使用ref定义对象类型的响应数据"><a href="#使用ref定义对象类型的响应数据" class="headerlink" title="使用ref定义对象类型的响应数据"></a>使用ref定义对象类型的响应数据</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//data</span></span><br><span class="line"><span class="keyword">let</span> car = <span class="title function_">ref</span>(&#123; <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;)</span><br><span class="line"><span class="keyword">let</span> games = <span class="title function_">ref</span>([</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="string">&#x27;0000001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;AAA1&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="string">&#x27;0000001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;AAA1&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="string">&#x27;0000001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;AAA1&#x27;</span> &#125;</span><br><span class="line">])</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changePrice</span>(<span class="params"></span>) &#123;</span><br><span class="line">    car.<span class="property">value</span>.<span class="property">price</span> += <span class="number">10</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(car.<span class="property">value</span>.<span class="property">price</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    games.<span class="property">value</span>[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;BBB1&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="/2024/03/17/Vue3_note/image-20240128220343854.png" alt="image-20240128220343854"></p>
<p>可以看出表面是<code>ref</code>包裹的对象，但是实际还是使用<code>reactive</code>包裹实现的</p>
<h3 id="ref和reactive的区别"><a href="#ref和reactive的区别" class="headerlink" title="ref和reactive的区别"></a>ref和reactive的区别</h3><table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">可以定义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ref</td>
<td align="center">基本类型、对象类型的响应式数据[层级不深]</td>
</tr>
<tr>
<td align="center">reactive</td>
<td align="center">可以定义：对象类型的响应式数据[层级深] <br>重新分配会丢失响应式的属性<a href="%E5%AF%B9%E5%B7%B2%E7%BB%8F%E7%94%A8%60reactive%60%E5%88%86%E9%85%8D%E5%A5%BD%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1%EF%BC%8C%E9%87%8D%E6%96%B0%E8%A6%86%E5%86%99%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E4%BC%9A%E4%BD%BF%E6%96%B0%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%A4%B1%E5%8E%BB%E5%93%8D%E5%BA%94%E5%BC%8F">^1</a></td>
</tr>
</tbody></table>
<blockquote>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//data</span></span><br><span class="line"><span class="keyword">let</span> car = <span class="title function_">ref</span>(&#123; <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;)</span><br><span class="line"><span class="comment">//method</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeCar</span>(<span class="params"></span>)&#123;</span><br><span class="line">    car.<span class="property">value</span>=&#123;<span class="attr">brand</span>:<span class="string">&#x27;BYD&#x27;</span>,<span class="attr">price</span>:<span class="number">20</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时一旦使用changeCar()这个方法，那么奔驰就会被BYD覆盖并且覆盖它的BYD不具备响应式</p>
<p>可以使用Object.assign(obj1,obj2)来解决，如下：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123; <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;)</span><br><span class="line"><span class="comment">//method</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeCar</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(car,&#123; <span class="attr">brand</span>: <span class="string">&#x27;BYD&#x27;</span>,<span class="attr">price</span>: <span class="number">20</span>&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ref不需要这么写</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> car = <span class="title function_">ref</span>(&#123; <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;)</span><br><span class="line"><span class="keyword">let</span> games = <span class="title function_">ref</span>([</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="string">&#x27;0000001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;AAA1&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="string">&#x27;0000001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;AAA1&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="string">&#x27;0000001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;AAA1&#x27;</span> &#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">//method</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changePrice</span>(<span class="params"></span>) &#123;</span><br><span class="line">    car.<span class="property">value</span>.<span class="property">price</span> += <span class="number">10</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(car.<span class="property">value</span>.<span class="property">brand</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    games.<span class="property">value</span>[<span class="number">0</span>].<span class="property">name</span>=<span class="string">&#x27;BBB1&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeCar</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// Object.assign(car,&#123; brand: &#x27;BYD&#x27;,price: 20&#125;)</span></span><br><span class="line">    car.<span class="property">value</span> = &#123; <span class="attr">brand</span>: <span class="string">&#x27;BYD&#x27;</span>,<span class="attr">price</span>: <span class="number">20</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原因是ref的对象覆盖是发生在car.value上的</p>
</blockquote>
<h3 id="toRefs和toRef"><a href="#toRefs和toRef" class="headerlink" title="toRefs和toRef"></a>toRefs和toRef</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref,reactive,toRefs,toRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//data</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> &#123;name,age&#125; = <span class="title function_">toRefs</span>(person)</span><br><span class="line"><span class="keyword">let</span> age_2 = <span class="title function_">toRef</span>(person,<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line"><span class="comment">//method</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>)&#123;</span><br><span class="line">    name.<span class="property">value</span>+=<span class="string">&#x27;~&#x27;</span></span><br><span class="line">&#125;   </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>)&#123;</span><br><span class="line">    age.<span class="property">value</span>+=<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>toRefs会接收一组由reactive构成的对象，然后把对象中的每一组key,value都拎出来，形成一个新的对象（依然具备响应式的属性）;</p>
<p>toRef只会接受由reactive构成的对象当中的一个元素</p>
<h2 id="computed计算属性"><a href="#computed计算属性" class="headerlink" title="computed计算属性"></a>computed计算属性</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- html --&gt;</span><br><span class="line">&lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;!-- 这样↓写是单向绑定 --&gt;</span><br><span class="line">    &lt;!-- 姓：&lt;input type=&quot;text&quot; :value=&quot;firstName&quot;&gt;&lt;br&gt;  --&gt;</span><br><span class="line">    姓：&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt;&lt;br&gt;</span><br><span class="line">    名：&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt;&lt;br&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;/span&gt;&lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFullName&quot;&gt;修改全名&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">    import &#123; ref, computed &#125; from &#x27;vue&#x27;</span><br><span class="line">    let firstName = ref(&#x27;张&#x27;)</span><br><span class="line">    let lastName = ref(&#x27;三&#x27;)</span><br><span class="line">    //如此定义的计算属性是只读的</span><br><span class="line">    // let fullName = computed(()=&gt;&#123;</span><br><span class="line">    //     return firstName.value.slice(0,1).toUpperCase()+firstName.value.slice(1)+&#x27;-&#x27;+lastName.value.slice(0,1).toUpperCase()+lastName.value.slice(1)</span><br><span class="line">    // &#125;)</span><br><span class="line">    //如此定义的计算属性可读可写</span><br><span class="line">    let fullName = computed(&#123;</span><br><span class="line">        get() &#123;</span><br><span class="line">            return firstName.value.slice(0, 1).toUpperCase() + firstName.value.slice(1) + &#x27;-&#x27; + lastName.value.slice(0, 1).toUpperCase() + lastName.value.slice(1)</span><br><span class="line">        &#125;,</span><br><span class="line">        set(val) &#123;</span><br><span class="line">            const [str1, str2] = val.split(&#x27;-&#x27;)</span><br><span class="line">            firstName.value = str1</span><br><span class="line">            lastName.value = str2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    //method</span><br><span class="line">    function changeFullName() &#123;</span><br><span class="line">        fullName.value = &#x27;li-si&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>上面代码段<code>let fullName = computed(&#123;//略&#125;)</code>相比于function(){ }，具备了缓存，只有计算属性依赖的数据发生变化时才会重新计算，数据不变即便是重复调用也不会反复执行computed中的内容;</p>
<h2 id="Watch监视"><a href="#Watch监视" class="headerlink" title="Watch监视"></a>Watch监视</h2><p>watch基本格式：</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">import &#123; watch &#125; from &#x27;vue&#x27;</span><br><span class="line">watch(obj,func,config) //(被监视的数据，监视的回调，监视的配置)</span><br></pre></td></tr></table></figure>

<p>它能够监视：</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">一个有返回值的函数，ref，reactive响应式对象，或者由以上组成的数组</span><br></pre></td></tr></table></figure>

<h3 id="监视【ref】定义的【基本类型】数据"><a href="#监视【ref】定义的【基本类型】数据" class="headerlink" title="监视【ref】定义的【基本类型】数据"></a>监视【ref】定义的【基本类型】数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">       &lt;h1&gt;情况一，监视[ref]定义的[基本类型]数据&lt;/h1&gt;</span><br><span class="line">       &lt;h2&gt;当前求和为:&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">       &lt;button @click=&quot;changeNum&quot;&gt;sum++&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">//data</span><br><span class="line">let sum = ref(0);</span><br><span class="line">//method</span><br><span class="line">function changeNum()&#123;</span><br><span class="line">    sum.value+=1;</span><br><span class="line">&#125;</span><br><span class="line">watch(sum,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;sum变化了&#x27;,newValue,oldValue)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>关于停止监视以及箭头函数的补充：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> stopWatch =<span class="title function_">watch</span>(sum,<span class="keyword">function</span>(<span class="params">newValue,oldValue</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">    <span class="keyword">if</span> (newValue&gt;=<span class="number">10</span>)&#123;</span><br><span class="line">        <span class="title function_">stopWatch</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>箭头函数就是<strong>不需要</strong>返回值(但是可以有)的function</p>
<h3 id="监视【ref】定义的【对象类型】数据"><a href="#监视【ref】定义的【对象类型】数据" class="headerlink" title="监视【ref】定义的【对象类型】数据"></a>监视【ref】定义的【对象类型】数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">       &lt;h1&gt;情况二，监视[ref]定义的[对象类型]数据&lt;/h1&gt;</span><br><span class="line">       &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">       &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">       &lt;br&gt;</span><br><span class="line">       &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">       &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">       &lt;button @click=&quot;changePerson&quot;&gt;修改人&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">//data</span><br><span class="line">let person =ref(&#123;</span><br><span class="line">    name:&quot;张三&quot;,</span><br><span class="line">    age:18,</span><br><span class="line">&#125;)</span><br><span class="line">//method</span><br><span class="line">function changeName()&#123;</span><br><span class="line">    person.value.name+=&quot;~&quot;</span><br><span class="line">&#125;</span><br><span class="line">function changeAge()&#123;</span><br><span class="line">    person.value.age+=1</span><br><span class="line">&#125;</span><br><span class="line">function changePerson()&#123;</span><br><span class="line">    person.value=&#123;name:&quot;李四&quot;,age:22&#125;</span><br><span class="line">&#125;</span><br><span class="line">//watch</span><br><span class="line">watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person变化了&#x27;,newValue,oldValue)</span><br><span class="line">&#125;,&#123;deep:true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>如上，但是和监视基础类型相比，代码变化不大</p>
<p>注意到，ref的替换对象是新旧替换，地址发生变化</p>
<p><img src="/2024/03/17/Vue3_note/image-20240201213743914.png" alt="image-20240201213743914"></p>
<h3 id="监视【reactive】定义的【对象类型】数据"><a href="#监视【reactive】定义的【对象类型】数据" class="headerlink" title="监视【reactive】定义的【对象类型】数据"></a>监视【reactive】定义的【对象类型】数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">       &lt;h1&gt;情况三，监视[reactive]定义的[对象类型]数据&lt;/h1&gt;</span><br><span class="line">       &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">       &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">       &lt;br&gt;</span><br><span class="line">       &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">       &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">       &lt;button @click=&quot;changePerson&quot;&gt;修改人&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">import &#123; reactive, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">//data</span><br><span class="line">let person =reactive(&#123;</span><br><span class="line">    name:&quot;张三&quot;,</span><br><span class="line">    age:18,</span><br><span class="line">&#125;)</span><br><span class="line">//method</span><br><span class="line">function changeName()&#123;</span><br><span class="line">    person.name+=&quot;~&quot;</span><br><span class="line">&#125;</span><br><span class="line">function changeAge()&#123;</span><br><span class="line">    person.age+=1</span><br><span class="line">&#125;</span><br><span class="line">function changePerson()&#123;</span><br><span class="line">    Object.assign(person,&#123;name:&quot;李四&quot;,age:22&#125;)</span><br><span class="line">&#125;</span><br><span class="line">//watch</span><br><span class="line">//监视reactive定义的对象，会默认开启深度监视，且无法手动关闭</span><br><span class="line">watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person变化了&#x27;,newValue,oldValue)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2024/03/17/Vue3_note/image-20240201212634644.png" alt="image-20240201212634644"></p>
<p>可以注意到reactive替换对象是值覆盖，地址没有发生变化</p>
<h3 id="监视【ref】或【reactive】定义的对象当中的属性"><a href="#监视【ref】或【reactive】定义的对象当中的属性" class="headerlink" title="监视【ref】或【reactive】定义的对象当中的属性"></a>监视【ref】或【reactive】定义的对象当中的属性</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h1&gt;情况四，监视[ref,reactive]定义的[对象类型]数据中的某个属性&lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;姓名:&#123;&#123; person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;年龄:&#123;&#123; person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;汽车:&#123;&#123; person.car.c1&#125;&#125;\&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;changeCar1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;changeCar2&quot;&gt;修改第二台车&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;changeCar&quot;&gt;修改全部车&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">//data</span><br><span class="line">let person  =reactive(&#123;</span><br><span class="line">    name:&quot;张三&quot;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">        c1:&quot;奔驰&quot;,</span><br><span class="line">        c2:&quot;宝马&quot;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">//method</span><br><span class="line">function changeName()&#123;</span><br><span class="line">    person.name+=&#x27;~&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function changeAge()&#123;</span><br><span class="line">    person.age+=1</span><br><span class="line">&#125;</span><br><span class="line">function changeCar1()&#123;</span><br><span class="line">    person.car.c1=&#x27;雅迪&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function changeCar2()&#123;</span><br><span class="line">    person.car.c2=&#x27;爱玛&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function changeCar()&#123;</span><br><span class="line">    person.car=&#123;c1:&#x27;五菱&#x27;,c2:&#x27;BYD&#x27;&#125;</span><br><span class="line">&#125;</span><br><span class="line">//watch</span><br><span class="line">watch (()=&gt;&#123;return person.name&#125;,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.name变化了&#x27;,newValue,oldValue)</span><br><span class="line">&#125;)</span><br><span class="line">watch (()=&gt;person.car,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.car变化了&#x27;,newValue,oldValue)</span><br><span class="line">&#125;,&#123;deep:true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>监视基本类型数据的时候，需要将其写成函数式；</p>
<p>监视对象类型的时候，<strong>最好</strong>将其写成函数式（可以不写，但是有局限性）</p>
<h3 id="监视上述多个数据"><a href="#监视上述多个数据" class="headerlink" title="监视上述多个数据"></a>监视上述多个数据</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">watch ([<span class="function">()=&gt;</span>person.<span class="property">name</span>,person.<span class="property">car</span>],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.car变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>拿个数组包起来就行，数组里面不一定一定要是程式，也可以是对象，看需求</p>
<h3 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h3><p>watchEffect可以自动执行监听，不需要指出监听对象</p>
<p>而watch需要指明监听对象</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(person.<span class="property">age</span>&gt;=<span class="number">20</span>||其他条件)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;发送请求&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="ref的标签属性"><a href="#ref的标签属性" class="headerlink" title="ref的标签属性"></a>ref的标签属性</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- </span><br><span class="line">Person.vue </span><br><span class="line">--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h1&gt;标签的ref属性&lt;/h1&gt;</span><br><span class="line">        &lt;h2 ref=&quot;title2&quot;&gt;北京&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;showlog&quot;&gt;点我输出&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">//data</span><br><span class="line">let title2 = ref()</span><br><span class="line">let a = ref(0)</span><br><span class="line">let b = ref(1)</span><br><span class="line">let c = ref(2)</span><br><span class="line">//method</span><br><span class="line">function showlog()&#123;</span><br><span class="line">    console.log(title2.value)</span><br><span class="line">&#125;</span><br><span class="line">defineExpose(&#123;a,b&#125;)//穿过保护性机制让外界可以看到</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- </span><br><span class="line">App.vue </span><br><span class="line">--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">        &lt;button @click=&quot;showlog&quot;&gt;测试&lt;/button&gt;</span><br><span class="line">        &lt;Person ref =&quot;ren&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">//  JS或者TS</span><br><span class="line">import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">//data</span><br><span class="line">let ren = ref()</span><br><span class="line">//method</span><br><span class="line">function showlog()&#123;</span><br><span class="line">    console.log(ren.value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>点击测试按钮，会输出<code>Person</code>的组件对象，如果没有<code>defineExpose()</code>那么输出的组件对象里是看不到<code>Person</code>组件中定义的a，b，c，这也是防止多人开发的时候，命名冲突。</p>
<p>ref组件输出的特点一方面是收到保护性机制（这是使用id所不具备的），另一方面也是具有响应式的特性，就是可以数据变化的时候相互传递并且快速更新。</p>
<h2 id="回顾TS中的接口和泛型"><a href="#回顾TS中的接口和泛型" class="headerlink" title="回顾TS中的接口和泛型"></a>回顾TS中的接口和泛型</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//types/index.ts</span></span><br><span class="line"><span class="comment">//定义一个接口用于限制person对象的具体属性</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">PersonInter</span>&#123;</span><br><span class="line">    <span class="attr">id</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Personouter</span>&#123;</span><br><span class="line">    <span class="attr">id</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">Persons</span> =<span class="title class_">PersonInter</span>[]</span><br></pre></td></tr></table></figure>

<p>可以用它来约束变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Person.vue --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">import &#123; type PersonInter, type Persons &#125; from &#x27;@/types&#x27;</span><br><span class="line">let person: Persons|PersonInter = [</span><br><span class="line">    &#123; id: &#x27;123&#x27;, name: &quot;zhangsan&quot;, age: 60 &#125;,</span><br><span class="line">    &#123; id: &#x27;123&#x27;, name: &quot;zhangsan&quot;, age: 60 &#125;,</span><br><span class="line">]</span><br><span class="line">let person2: Persons|PersonInter|Personouter = </span><br><span class="line">    &#123; id: &#x27;123&#x27;, name: &quot;zhangsan&quot;, age: 60 &#125;,</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="props的使用"><a href="#props的使用" class="headerlink" title="props的使用"></a>props的使用</h2><p>简而言之就是<strong>爸爸给儿子传话</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">	&lt;!-- 爸爸给儿子传参 --&gt;</span><br><span class="line">    &lt;Person  a=&quot;hello&quot; :list = &quot;person&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">//  JS或者TS</span><br><span class="line">import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">import &#123; type PersonInter, type Personouter, type Persons &#125; from &#x27;@/types&#x27;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">let person: Persons | PersonInter = [</span><br><span class="line">    &#123; id: &#x27;123&#x27;, name: &quot;zhangsan&quot;, age: 60 &#125;,</span><br><span class="line">    &#123; id: &#x27;123&#x27;, name: &quot;zhangsan&quot;, age: 60 &#125;,</span><br><span class="line">]</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Person.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;!-- v-for遍历 --&gt;</span><br><span class="line">            &lt;li v-for=&quot;personObj in list&quot; :key=&quot;personObj.id&quot;&gt;</span><br><span class="line">                &#123;&#123; personObj.name &#125;&#125; -- &#123;&#123; personObj.age &#125;&#125;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">import &#123; defineProps, withDefaults &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; type Persons &#125; from &#x27;@/types&#x27;;</span><br><span class="line">//接收</span><br><span class="line">// defineProps([&#x27;a&#x27;, &#x27;list&#x27;])</span><br><span class="line"></span><br><span class="line">//接收a，同时将props保存起来</span><br><span class="line">// let x = defineProps([&#x27;a&#x27;])</span><br><span class="line">// console.log(x.a)</span><br><span class="line"></span><br><span class="line">//接收加限制类型</span><br><span class="line">// defineProps&lt;&#123; list: Persons &#125;&gt;()</span><br><span class="line"></span><br><span class="line">//接收list+限制类悉尼港+限制必要性+指定默认值</span><br><span class="line">//withDefaults(defineProps(),&#123;&#125;)</span><br><span class="line">withDefaults(defineProps&lt;&#123; list?: Persons &#125;&gt;(), &#123;//第二个参数只接收函数返回值类型</span><br><span class="line">    list: () =&gt; [</span><br><span class="line">        &#123; id: &#x27;123&#x27;, name: &quot;zhangsan&quot;, age: 60 &#125;,</span><br><span class="line">        &#123; id: &#x27;123&#x27;, name: &quot;zhangsan&quot;, age: 60 &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2024/03/17/Vue3_note/image-20240310184451213.png" alt="image-20240310184451213"></p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>组件的生命周期</p>
<blockquote>
<ul>
<li><strong>时刻</strong>[调用特定的函数]</li>
<li><strong>创建</strong>[setup自动执行]</li>
<li><strong>挂载</strong>[挂载前<code>onBeforeMount()</code>，挂载完毕<code>onMounted(</code>)]</li>
<li><strong>更新</strong>[更新前<code>onBeforeUpdate()</code>，更新完毕<code>onUpdated()</code>]</li>
<li><strong>卸载</strong>[销毁前<code>onBeforeUnmount()</code>，销毁完毕<code>onUnmounted()</code>]</li>
</ul>
</blockquote>
<p>生命周期、生命周期函数、生命周期钩子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Person.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;ul&gt;&#123;&#123; sum &#125;&#125;&lt;/ul&gt;</span><br><span class="line">        &lt;button @click=&quot;add&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;!-- Person.vue --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">import &#123; onBeforeMount, onBeforeUnmount, onBeforeUpdate, onMounted, onUnmounted, onUpdated, ref &#125; from &quot;vue&quot;</span><br><span class="line">let sum = ref(0)</span><br><span class="line">function add() &#123;</span><br><span class="line">    sum.value = sum.value + 1</span><br><span class="line">&#125;</span><br><span class="line">//创建</span><br><span class="line">console.log(&#x27;创建&#x27;)</span><br><span class="line">//挂载</span><br><span class="line">onBeforeMount(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;挂载前&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">//挂载完毕</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;挂载完毕&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">//更新前</span><br><span class="line">onBeforeUpdate(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;更新前&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">//更新完毕</span><br><span class="line">onUpdated(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;更新完毕&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">// 卸载</span><br><span class="line">onBeforeUnmount(()=&gt;&#123;</span><br><span class="line">    console.log(&quot;卸载前&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">//卸载完毕</span><br><span class="line">onUnmounted(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;卸载完毕&quot;)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>生命周期流程图[来自官网]</p>
<img src="/2024/03/17/Vue3_note/lifecycle_zh-CN.FtDDVyNA.png" alt="组件生命周期图示" style="zoom:50%;">

<h2 id="自定义hook"><a href="#自定义hook" class="headerlink" title="自定义hook"></a>自定义hook</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 安装axios，非必要，只是此处样例用到了</span><br><span class="line">$ npm i axios</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- Person.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;add&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;img v-for=&quot;(dog, index) in doglist&quot; :src=&quot;dog&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">        &lt;button @click=&quot;getDog&quot;&gt;获取dog&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;!-- Person.vue --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person123&quot;&gt;</span><br><span class="line">import useDog from &#x27;@/hooks/useDog&#x27;;</span><br><span class="line">import useSum from &#x27;@/hooks/useSum&#x27;;</span><br><span class="line">const &#123; sum, add &#125; = useSum()</span><br><span class="line">const &#123; doglist, getDog &#125; = useDog()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>src/hooks</code>中</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//useSum.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">    sum.<span class="property">value</span> = sum.<span class="property">value</span> + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123; sum, add &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//useDog.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> doglist = <span class="title function_">reactive</span>([</span><br><span class="line">    <span class="string">&quot;https://images.dog.ceo/breeds/pembroke/n02113023_4373.jpg&quot;</span>,</span><br><span class="line">  ]);</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getDog</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> axios.<span class="title function_">get</span>(</span><br><span class="line">        <span class="string">&quot;https://dog.ceo/api/breed/pembroke/images/random&quot;</span></span><br><span class="line">      );</span><br><span class="line">      doglist.<span class="title function_">push</span>(result.<span class="property">data</span>.<span class="property">message</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">data</span>.<span class="property">message</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="title function_">alert</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//向外部提供东西</span></span><br><span class="line">  <span class="keyword">return</span> &#123; doglist, getDog &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>作用是啥？vue里看着干净些吧，俺也不知道还有没有别的用途了？</p>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><h3 id="安装和使用"><a href="#安装和使用" class="headerlink" title="安装和使用"></a>安装和使用</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#安装vue-router最新版</span><br><span class="line">$npm i vue-router</span><br></pre></td></tr></table></figure>

<p>对App.vue稍作调整</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- </span><br><span class="line">App.vue </span><br><span class="line">--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;h2&gt;Vue路由测试&lt;/h2&gt;</span><br><span class="line">    &lt;!-- 导航区 --&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/home&quot;&gt;首页 &lt;/RouterLink&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/news&quot;&gt;新闻 &lt;/RouterLink&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/about&quot;&gt;关于 &lt;/RouterLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- 展示区 --&gt;</span><br><span class="line">    &lt;div class=&quot;main-content&quot; style=&quot;border: 1px solid red;height: 300px;width:300px&quot;&gt;</span><br><span class="line">        &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">import &#123; RouterView &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>配置路由配置项<code>index.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//写一个路由器并暴露出去</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;@/components/Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&quot;@/components/News.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&quot;@/components/About.vue&quot;</span>;</span><br><span class="line"><span class="comment">//创建路由器</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="comment">//路由器工作模式,很重要👇👇👇</span></span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     path:&#x27;路径&#x27;,</span></span><br><span class="line">    <span class="comment">//     component:组件</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/news&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在<code>main.ts</code>中使用路由器</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//引入createApp用于创建应用</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">//引用App根组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个应用</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"><span class="comment">//使用路由器</span></span><br><span class="line">app.<span class="title function_">use</span>(router);</span><br><span class="line"><span class="comment">//挂载整个应用到app容器中</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2024/03/17/Vue3_note/image-20240314224306984.png" alt="image-20240314224306984"></p>
<p>路由组件：</p>
<p>靠路由的规则渲染出来的：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/demo&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: demo</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>一般组件：</p>
<p>亲手写标签出来的</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">demo</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="路由器工作模式"><a href="#路由器工作模式" class="headerlink" title="路由器工作模式"></a>路由器工作模式</h3><h5 id="history模式"><a href="#history模式" class="headerlink" title="history模式"></a>history模式</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="attr">path</span>:<span class="variable constant_">XXX</span>,</span><br><span class="line">    	<span class="attr">component</span>:<span class="variable constant_">XXX</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统<code>URL</code></p>
<p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<strong>404错误</strong></p>
<h5 id="hash模式"><a href="#hash模式" class="headerlink" title="hash模式"></a>hash模式</h5><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="attr">path</span>:<span class="variable constant_">XXX</span>,</span><br><span class="line">    	<span class="attr">component</span>:<span class="variable constant_">XXX</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>优点：兼容性好，因为不需要服务器端处理路径</p>
<p>缺点：<code>URL</code>带有<code>#</code>不太美观，<strong>且在<code>SEO</code>优化方面相对较差</strong></p>
<h3 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="attr">routes</span>: [</span><br><span class="line">  <span class="comment">// &#123;</span></span><br><span class="line">  <span class="comment">//     name:&#x27;路由名&#x27;</span></span><br><span class="line">  <span class="comment">//     path:&#x27;路径&#x27;,</span></span><br><span class="line">  <span class="comment">//     component:组件</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;HOME&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;NEWS&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/news&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;ABOUT&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">    &lt;!--三种路由跳转方式 --&gt;</span><br><span class="line">    &lt;RouterLink to=&quot;/home&quot;&gt;首页 &lt;/RouterLink&gt;</span><br><span class="line">     &lt;!--注意感叹号 --&gt;</span><br><span class="line">    &lt;RouterLink :to=&quot;&#123; name: &#x27;NEWS&#x27; &#125;&quot;&gt;新闻 &lt;/RouterLink&gt;</span><br><span class="line">    &lt;RouterLink :to=&quot;&#123; path: &#x27;/about&#x27; &#125;&quot;&gt;关于 &lt;/RouterLink&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h3><p>P.S 路由页面要有<code>&lt;router-view/&gt;</code>来承载</p>
<p>子路由</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="attr">routes</span>: [</span><br><span class="line">  <span class="comment">// &#123;</span></span><br><span class="line">  <span class="comment">//   name: &quot;路由名&quot;,</span></span><br><span class="line">  <span class="comment">//   path: &quot;/路径&quot;,</span></span><br><span class="line">  <span class="comment">//   component: 组件名,</span></span><br><span class="line">  <span class="comment">//   children: [</span></span><br><span class="line">  <span class="comment">//     &#123;</span></span><br><span class="line">  <span class="comment">//       path: &quot;子路由路径&quot;,</span></span><br><span class="line">  <span class="comment">//       component: 子路由组件名,</span></span><br><span class="line">  <span class="comment">//     &#125;,</span></span><br><span class="line">  <span class="comment">//   ],</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;NEWS&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/news&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;Detail&#x27;</span></span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h3 id="路由传参"><a href="#路由传参" class="headerlink" title="路由传参"></a>路由传参</h3><h4 id="query"><a href="#query" class="headerlink" title="query"></a>query</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- News.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot;&gt;</span><br><span class="line">                &lt;RouterLink :to=&quot;`/news/detail?id=$&#123;news.id&#125;&amp;title=$&#123;news.title&#125;&amp;content=$&#123;news.content&#125;`&quot;&gt;&#123;&#123;</span><br><span class="line">                news.title &#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;div class=&quot;main-content&quot; style=&quot;border: 1px solid red;height: 300px;width:300px&quot;&gt;</span><br><span class="line">            &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;News&quot;&gt;</span><br><span class="line">import &#123; RouterView &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">const newsList = reactive([</span><br><span class="line">    &#123; id: &#x27;021120230&#x27;, title: &quot;基于区块链&quot;, content: &#x27;solidity&#x27; &#125;,</span><br><span class="line">    &#123; id: &#x27;021120231&#x27;, title: &quot;信息管理系统&quot;, content: &#x27;python&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;编号：&#123;&#123; route.query.id &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;标题：&#123;&#123; route.query.title &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;内容：&#123;&#123; route.query.content &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Detail&quot;&gt;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;</span><br><span class="line">let route = useRoute()</span><br></pre></td></tr></table></figure>

<p>这个不好用，看看得了</p>
<p>下面是<strong>使用对象传参</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- News.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot;&gt;</span><br><span class="line">                &lt;RouterLink :to=&quot;&#123;</span><br><span class="line">                name: &#x27;Detail&#x27;,</span><br><span class="line">                query: &#123;</span><br><span class="line">                    id: news.id,</span><br><span class="line">                    title: news.title,</span><br><span class="line">                    content: news.content</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;&quot;&gt;&#123;&#123; news.title &#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;div class=&quot;main-content&quot; style=&quot;border: 1px solid red;height: 300px;width:300px&quot;&gt;</span><br><span class="line">            &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;News&quot;&gt;</span><br><span class="line">import &#123; RouterView &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">const newsList = reactive([</span><br><span class="line">    &#123; id: &#x27;021120230&#x27;, title: &quot;基于区块链&quot;, content: &#x27;solidity&#x27; &#125;,</span><br><span class="line">    &#123; id: &#x27;021120231&#x27;, title: &quot;信息管理系统&quot;, content: &#x27;python&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- detail.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;编号：&#123;&#123; query.id &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;标题：&#123;&#123; query.title &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;内容：&#123;&#123; query.content &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Detail&quot;&gt;</span><br><span class="line">import &#123; toRefs &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;</span><br><span class="line">let route = useRoute()</span><br><span class="line">// 不使用toRefs会丢失响应式</span><br><span class="line">let &#123; query &#125; = toRefs(route)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="params参数"><a href="#params参数" class="headerlink" title="params参数"></a>params参数</h4><p>在路由规则中占位</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;NEWS&quot;</span>,</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&quot;/news&quot;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;Detail&quot;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;detail/:id/:title/:content&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- detail.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;编号：&#123;&#123; route.params.id &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;标题：&#123;&#123; route.params.title &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;内容：&#123;&#123; route.params.content &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Detail&quot;&gt;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">const route = useRoute()</span><br><span class="line">console.log(route)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">/* 样式 */</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- News.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;news in  newsList &quot; :key=&quot;news.id&quot;&gt;</span><br><span class="line">                &lt;!-- 第一种写法 --&gt;</span><br><span class="line">                &lt;!-- &lt;RouterLink :to=&quot;`/news/detail/$&#123;news.id&#125;/$&#123;news.title&#125;/$&#123;news.content&#125;`&quot;&gt;&#123;&#123; news.title &#125;&#125;</span><br><span class="line">                &lt;/RouterLink&gt; --&gt;</span><br><span class="line">                &lt;!-- 第二种写法 --&gt;</span><br><span class="line">                &lt;RouterLink :to=&quot;&#123;</span><br><span class="line">                name: &#x27;Detail&#x27;,</span><br><span class="line">                params: &#123;</span><br><span class="line">                    id: news.id,</span><br><span class="line">                    title: news.title,</span><br><span class="line">                    content: news.content</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; as any&quot;&gt;&#123;&#123; news.title &#125;&#125;</span><br><span class="line">                &lt;/RouterLink&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;div class=&quot;main-content&quot; style=&quot;border: 1px solid red;height: 300px;width:300px&quot;&gt;</span><br><span class="line">            &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;News&quot;&gt;</span><br><span class="line">import &#123; RouterView &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">const newsList = reactive([</span><br><span class="line">    &#123; id: &#x27;021120230&#x27;, title: &quot;基于区块链&quot;, content: &#x27;solidity&#x27; &#125;,</span><br><span class="line">    &#123; id: &#x27;021120231&#x27;, title: &quot;信息管理系统&quot;, content: &#x27;python&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>缺点：</p>
<p>对象参数中不可以包含数组</p>
<h3 id="路由props配置"><a href="#路由props配置" class="headerlink" title="路由props配置"></a>路由props配置</h3><p>路由规则中配置</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;NEWS&quot;</span>,</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&quot;/news&quot;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;Detail&quot;</span>,</span><br><span class="line">      <span class="comment">// path: &quot;detail/:id/:title/:content&quot;,//params写法</span></span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;detail&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">      <span class="comment">// props: true, //params</span></span><br><span class="line">      <span class="comment">// query写法</span></span><br><span class="line">      <span class="title function_">props</span>(<span class="params">route</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> route.<span class="property">query</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- detail.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- html --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;编号：&#123;&#123; id &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;标题：&#123;&#123; title &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;内容：&#123;&#123; content &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Detail&quot;&gt;</span><br><span class="line">defineProps([&#x27;id&#x27;, &#x27;title&#x27;, &#x27;content&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="replace属性"><a href="#replace属性" class="headerlink" title="replace属性"></a>replace属性</h3><p>作用：控制路由跳转时操作浏览器历史记录的模式</p>
<p>浏览器历史记录有两种写入方式，分别为<code>push</code>和<code>replace</code></p>
<ul>
<li><code>push</code>：追加历史记录</li>
<li><code>replace</code>：替换当前记录，点击过后不能返回</li>
</ul>
<p>开启<code>replace</code>模式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;RouterLink replace to=&quot;/home&quot;&gt;首页 &lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure>

<h3 id="编程式路由导航"><a href="#编程式路由导航" class="headerlink" title="编程式路由导航"></a>编程式路由导航</h3><p>使用频率很高，远远大于RouterLink</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Home&quot;&gt;</span><br><span class="line">//效果是，点击首页三秒后跳转至新闻页</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; useRouter &#125; from &#x27;vue-router&#x27;;</span><br><span class="line">const router = useRouter()</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        router.push(&#x27;/news&#x27;)</span><br><span class="line">    &#125;, 3000)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><p>将指定路径重定向到另一个路径</p>
<p>在规则中进行修改【此规则包含了所有路由配置写法】</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//写一个路由器并暴露出去</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/News.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/About.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Detail</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/detail.vue&quot;</span>;</span><br><span class="line"><span class="comment">//创建路由器</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="comment">//路由器工作模式</span></span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//   name: &quot;路由名&quot;,</span></span><br><span class="line">    <span class="comment">//   path: &quot;/路径&quot;,</span></span><br><span class="line">    <span class="comment">//   component: 组件名,</span></span><br><span class="line">    <span class="comment">//   children: [</span></span><br><span class="line">    <span class="comment">//     &#123;</span></span><br><span class="line">    <span class="comment">//       path: &quot;子路由路径&quot;,</span></span><br><span class="line">    <span class="comment">//       component: 子路由组件名,</span></span><br><span class="line">    <span class="comment">//     &#125;,</span></span><br><span class="line">    <span class="comment">//   ],</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;HOME&quot;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;NEWS&quot;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/news&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;Detail&quot;</span>,</span><br><span class="line">          <span class="comment">// path: &quot;detail/:id/:title/:content&quot;,//params写法</span></span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;detail&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">          <span class="comment">// props: true, //params</span></span><br><span class="line">          <span class="comment">// query写法</span></span><br><span class="line">          <span class="title function_">props</span>(<span class="params">route</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> route.<span class="property">query</span>;</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;ABOUT&quot;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//重定向</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//把路由规则暴露出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<h2 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h2><h3 id="安装和部署"><a href="#安装和部署" class="headerlink" title="安装和部署"></a>安装和部署</h3><p><strong>安装</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#安装pinia</span><br><span class="line">$npm i pinia</span><br></pre></td></tr></table></figure>

<p><strong>搭建环境</strong></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>;</span><br><span class="line"><span class="comment">//引入pinia</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"><span class="comment">//创建pinia</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>();</span><br><span class="line">app.<span class="title function_">use</span>(router);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line"><span class="comment">//安装pinia</span></span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br></pre></td></tr></table></figure>

<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>其作用相当于前端的仓库</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//src/store/count.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useContentStore = <span class="title function_">defineStore</span>(<span class="string">&quot;count&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">//真正存数据的地方</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>: <span class="number">6</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//src/store/talk.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&quot;talk&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">//真正存数据的地方</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">talkList</span>: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;1&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;qqqqqqqqqqqqqqqqqqq&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;2&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;wwwwwwwwwwwwwww&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;3&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;eeeeeeeeeeeeeeeeeeeee&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;4&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr&quot;</span> &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>调用</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- components/Love.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;talk&quot;&gt;</span><br><span class="line">        &lt;button @click=&quot;getTalk&quot;&gt;获取一句土味情话&lt;/button&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;talk in talkStore.talkList&quot; :key=&quot;talk.id&quot;&gt;&#123;&#123; talk.title &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&#x27;ts&#x27; setup name=&#x27;LoveTalk&#x27;&gt;</span><br><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123; nanoid &#125; from &#x27;nanoid&#x27;</span><br><span class="line">import &#123; useTalkStore &#125; from &#x27;@/store/talk&#x27;</span><br><span class="line">const talkStore = useTalkStore()</span><br><span class="line">async function getTalk() &#123;</span><br><span class="line">    //发请求,连用两次解构赋值和一次重命名</span><br><span class="line">    let &#123; data: &#123; content: title &#125; &#125; = await axios.get(&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;);</span><br><span class="line">    // 把请求回来的字符串，包装成一个对象</span><br><span class="line">    let obj = &#123; id: nanoid(), title: title &#125;</span><br><span class="line">    console.log(obj)</span><br><span class="line">    //放到数组中</span><br><span class="line">    talkStore.talkList.unshift(obj)//最开始</span><br><span class="line">    // talkList.push(obj)//最末尾</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- components/Count.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;count&quot;&gt;</span><br><span class="line">        &lt;h2&gt;当前求和为:&#123;&#123; countStore.sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;select v-model.number=&quot;n&quot;&gt;</span><br><span class="line">        &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;加&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;minus&quot;&gt;减&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&#x27;ts&#x27; setup name=&quot;Count&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useContentStore &#125; from &#x27;@/store/count&#x27;</span><br><span class="line">// countStore是一个响应式reactive对象，</span><br><span class="line">// 并且会自动解构它下面的ref类型数据，因此不需要写.value</span><br><span class="line">const countStore = useContentStore()</span><br><span class="line">console.log(&#x27;@@@&#x27;, countStore.sum)</span><br><span class="line"></span><br><span class="line">//数据</span><br><span class="line">let n = ref(1) //用户选择的数据</span><br><span class="line"></span><br><span class="line">function add() &#123;</span><br><span class="line">    countStore.sum += n.value</span><br><span class="line">&#125;</span><br><span class="line">function minus() &#123;</span><br><span class="line">    countStore.sum -= n.value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改数据-三种方式"><a href="#修改数据-三种方式" class="headerlink" title="修改数据(三种方式)"></a>修改数据(三种方式)</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//components/Count.vue</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//&lt;----------第一种修改方式-------------&gt;</span></span><br><span class="line">    <span class="comment">// countStore.sum += n.value</span></span><br><span class="line">    <span class="comment">// countStore.school = &#x27;鸡大&#x27;</span></span><br><span class="line">    <span class="comment">//&lt;----------第二种修改方式-------------&gt;</span></span><br><span class="line">    <span class="comment">// 适用于修改多个数据</span></span><br><span class="line">    <span class="comment">// countStore.$patch(&#123;</span></span><br><span class="line">    <span class="comment">//     sum: 88,</span></span><br><span class="line">    <span class="comment">//     school: &#x27;鸡大&#x27;</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">    <span class="comment">//&lt;----------第二种修改方式-------------&gt;</span></span><br><span class="line">    countStore.<span class="title function_">increment</span>(n.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//src/store/count.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useContentStore = <span class="title function_">defineStore</span>(<span class="string">&quot;count&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">//actions里放置的是一个个方法，用于相应组件中的“动作”</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">value: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">sum</span> += value;</span><br><span class="line">    &#125;,<span class="comment">//很麻烦，日常开发用起来不方便，但是可以模块化，复用它</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//真正存数据的地方</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>: <span class="number">6</span>,</span><br><span class="line">      <span class="attr">school</span>: <span class="string">&quot;SUES&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="subscribe的使用"><a href="#subscribe的使用" class="headerlink" title="$subscribe的使用"></a>$subscribe的使用</h3><p>能够在本地浏览器存储数据，使其不会因为浏览器的刷新而导致数据丢失</p>
<p>还是以土味情话为例</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!--Love.vue--&gt;</span><br><span class="line">&lt;script lang=&#x27;ts&#x27; setup name=&#x27;LoveTalk&#x27;&gt;</span><br><span class="line">import &#123; useTalkStore &#125; from &#x27;@/store/talk&#x27;</span><br><span class="line">const talkStore = useTalkStore()</span><br><span class="line">async function getTalk() &#123;</span><br><span class="line">    talkStore.getATalk()</span><br><span class="line">    talkStore.$subscribe((mutate, state) =&gt; &#123;</span><br><span class="line">        //mutate表示发生变化的内容</span><br><span class="line">        console.log(&#x27;talkStore内的数据发生了变化&#x27;, mutate, state)</span><br><span class="line">        localStorage.setItem(&#x27;talkList&#x27;, JSON.stringify(state.talkList))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//src/store/talk.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; nanoid &#125; <span class="keyword">from</span> <span class="string">&quot;nanoid&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&quot;talk&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getATalk</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//发请求,连用两次解构赋值和一次重命名</span></span><br><span class="line">      <span class="keyword">let</span> &#123;</span><br><span class="line">        <span class="attr">data</span>: &#123; <span class="attr">content</span>: title &#125;,</span><br><span class="line">      &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&quot;https://api.uomg.com/api/rand.qinghua?format=json&quot;</span>);</span><br><span class="line">      <span class="comment">// 把请求回来的字符串，包装成一个对象</span></span><br><span class="line">      <span class="keyword">let</span> obj = &#123; <span class="attr">id</span>: <span class="title function_">nanoid</span>(), <span class="attr">title</span>: title &#125;;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line">      <span class="comment">//放到数组中</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">talkList</span>.<span class="title function_">unshift</span>(obj); <span class="comment">//最开始</span></span><br><span class="line">      <span class="comment">// talkList.push(obj)//最末尾</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//真正存数据的地方</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">talkList</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;talkList&quot;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || [],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>效果：</strong></p>
<p><img src="/2024/03/17/Vue3_note/image-20240317151105751.png" alt="image-20240317151105751"></p>
<h3 id="组合式写法"><a href="#组合式写法" class="headerlink" title="组合式写法"></a>组合式写法</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//src/store/talk.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&quot;talk&quot;</span>, <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> talkList = <span class="title function_">reactive</span>(</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;talkList&quot;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || []</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getATalk</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//发请求,连用两次解构赋值和一次重命名</span></span><br><span class="line">    <span class="keyword">let</span> &#123;</span><br><span class="line">      <span class="attr">data</span>: &#123; <span class="attr">content</span>: title &#125;,</span><br><span class="line">    &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&quot;https://api.uomg.com/api/rand.qinghua?format=json&quot;</span>);</span><br><span class="line">    <span class="comment">// 把请求回来的字符串，包装成一个对象</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123; <span class="attr">id</span>: <span class="title function_">nanoid</span>(), <span class="attr">title</span>: title &#125;;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line">    <span class="comment">//放到数组中</span></span><br><span class="line">    talkList.<span class="property">talkList</span>.<span class="title function_">unshift</span>(obj); <span class="comment">//最开始</span></span><br><span class="line">    <span class="comment">// talkList.push(obj)//最末尾</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123; talkList, getATalk &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="向后端发起请求"><a href="#向后端发起请求" class="headerlink" title="向后端发起请求"></a>向后端发起请求</h2><p>核心语句，当然后端要做好跨域访问</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>; </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">Login</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">let</span> loginMessage = &#123;</span><br><span class="line">        <span class="attr">user_id</span>: userid.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">password</span>: password.<span class="property">value</span></span><br><span class="line">    &#125;</span><br><span class="line"> 	<span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;http://localhost:8080/login&#x27;</span>, loginMessage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>写个样例，向后端发送登录请求，并将返回的token存入Pinia中,同时在浏览器也做好存储，避免服务器重启以及刷新浏览器会丢失数据</p>
<p>先新建仓库</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//store/loginStore.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">type</span> <span class="title class_">LoginResult</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/interface/loginResult&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useLoginStore = <span class="title function_">defineStore</span>(<span class="string">&quot;login&quot;</span>, <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//真正存数据的地方</span></span><br><span class="line">    <span class="keyword">const</span> userid = <span class="title function_">ref</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;userid&quot;</span>) || <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> username = <span class="title function_">ref</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;username&quot;</span>) || <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> publicKey = <span class="title function_">ref</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;publicKey&quot;</span>) || <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> konohaToken = <span class="title function_">ref</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;konohaToken&quot;</span>) || <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Login</span>(<span class="params">loginResult: LoginResult</span>) &#123;</span><br><span class="line">        userid.<span class="property">value</span> = loginResult.<span class="property">user_id</span></span><br><span class="line">        username.<span class="property">value</span> = loginResult.<span class="property">username</span></span><br><span class="line">        publicKey.<span class="property">value</span> = loginResult.<span class="property">publicKey</span></span><br><span class="line">        konohaToken.<span class="property">value</span> = loginResult.<span class="property">konohaToken</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; userid, username, publicKey, konohaToken, <span class="title class_">Login</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>login.vue</code>中</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useLoginStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/loginStore&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">const</span> loginStore = <span class="title function_">useLoginStore</span>()</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">Login</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> loginMessage = &#123;</span><br><span class="line">        <span class="attr">user_id</span>: userid.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">password</span>: password.<span class="property">value</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;http://localhost:8080/login&#x27;</span>, loginMessage);</span><br><span class="line">        <span class="comment">// console.log(loginMessage)</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send successful:&#x27;</span>, response.<span class="property">data</span>.<span class="property">data</span>);</span><br><span class="line">        <span class="keyword">switch</span> (response.<span class="property">data</span>.<span class="property">code</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">200</span>:</span><br><span class="line">                <span class="comment">// 登录成功后的处理</span></span><br><span class="line">                loginStore.<span class="title class_">Login</span>(response.<span class="property">data</span>.<span class="property">data</span>)</span><br><span class="line">                loginStore.$subscribe(<span class="function">(<span class="params">mutate, state</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">//mutate表示发生变化的内容，同时更新浏览器存储</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;loginStore内的数据发生了变化&#x27;</span>, mutate, state)</span><br><span class="line">                    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;userid&#x27;</span>, state.<span class="property">userid</span>)</span><br><span class="line">                    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;username&#x27;</span>, state.<span class="property">username</span>)</span><br><span class="line">                    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;publicKey&#x27;</span>, state.<span class="property">publicKey</span>)</span><br><span class="line">                    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;konohaToken&#x27;</span>, state.<span class="property">konohaToken</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">                    <span class="attr">message</span>: response.<span class="property">data</span>.<span class="property">msg</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                <span class="comment">//登陆失败或者异常时的处理</span></span><br><span class="line">                <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">                    <span class="attr">message</span>: response.<span class="property">data</span>.<span class="property">msg</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">//同时清空输入框，这里可以说是非常简单粗暴了</span></span><br><span class="line">                userid.<span class="property">value</span> =<span class="string">&#x27;&#x27;</span></span><br><span class="line">                password.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Login failed:&#x27;</span>, error);</span><br><span class="line">        <span class="comment">// 登录失败的处理</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>P.S <code>get</code>请求要写完整，最后的斜杠不能少</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/showclaims/&quot;</span>)</span><br></pre></td></tr></table></figure>




                                            
                          </div>
                          <footer class="article-footer">
                            
<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Typescript/" rel="tag">Typescript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue3-0/" rel="tag">Vue3.0</a></li></ul>

                          </footer>

            </div>

            
              
<nav class="article-nav">
  
  <a href="/2024/04/01/Gin_note/" class="article-nav-link">
    <strong class="article-nav-caption">前一篇</strong>
    <div class="article-nav-title">
      
      Gin 笔记
      
    </div>
  </a>
  
  
  <a href="/2024/01/23/xiaozhen_blockchain_note/" class="article-nav-link">
    <strong class="article-nav-caption">后一篇</strong>
    <div class="article-nav-title">肖臻-区块链 笔记</div>
  </a>
  
</nav>

                

                  
                    
                      
                        

</article>

<style>
  /* @font-face {
    font-family: 'SongHuiZongShouJinJiaCuBan-2';
    src: url("/css/songhuizong/SongHuiZongShouJinJiaCuBan-2.woff") format('woff'),
      url("/css/songhuizong/SongHuiZongShouJinJiaCuBan-2.ttf") format('truetype');
    font-weight: normal;
    font-style: normal;
  } */

  .article-inner {
    position: relative;
    overflow: hidden;
    /* 确保内容不会覆盖背景图 */
  }

</style>
</section>
    
<footer class="footer">
  <div class="outer" style="display: inline-block;">
    <ul class="list-inline">
      <li>LRay的博客&nbsp;  |&nbsp; 2024</li><br>
      
        <li>
          
            <img src="/images/foot-logo.png"  style="width: 16px;">
            <a href="https://beian.miit.gov.cn/" target="_blank" style="text-decoration: none; color: rgba(0, 0, 0, 0.5);">
              皖ICP备2024053806号-1
            </a>
          
        </li><br>
      
      <li id="uptime">本站已安全运行：</li>
    </ul>
  </div>
</footer>

<script>
  // 更新并实时显示站点运行时长
  function updateUptime() {
    // 获取网站创建时间，这里假设你有一个变量或者常量存储了网站创建时间
    var startDate = new Date('2024-04-28');
    
    // 计算运行时长
    var now = new Date();
    var uptime = now.getTime() - startDate.getTime();
    var seconds = Math.floor(uptime / 1000);
    var minutes = Math.floor(seconds / 60);
    var hours = Math.floor(minutes / 60);
    var days = Math.floor(hours / 24);
    
    // 计算剩余的小时、分钟和秒数
    hours %= 24;
    minutes %= 60;
    seconds %= 60;
    
    // 更新页面中的元素内容
    var uptimeString = days + ' 天, ' + hours + ' 小时, ' + minutes + ' 分钟, ' + seconds + ' 秒';
    document.getElementById('uptime').textContent = '本站已安全运行：' + uptimeString;
  }
  
  // 每秒更新一次运行时长
  setInterval(updateUptime, 1000);
  
  // 页面加载完成后立即更新一次
  updateUptime();
</script>
  </main>
  <aside class="sidebar">
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="https://lray-iu.oss-cn-hangzhou.aliyuncs.com/tenten.png" alt="LRay的博客" style="border-radius: 45px;"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/gallery">相册</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/favorite">收藏</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/postcard">收集</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="手机端似乎不支持该功能，我深感抱歉">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>





<script src="/js/tocbot.min.js"></script>


<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
  });
</script>



<script src="/js/ocean.js"></script>

</body>

</html>