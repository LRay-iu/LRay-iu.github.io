<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta name="description" content="æ°´é—¨è½¦é™©å¼€å‘è¿‡ç¨‹è®°å½•">
  
  <title>
    æ°´é—¨è½¦é™©çš„å¼€å‘è®°å½•ï¼ˆåŒºå—é“¾ï¼‰ |
    
    LRayçš„åšå®¢
  </title>
  <!-- Icon -->
  
    <link rel="shortcut icon" href="/favicon.ico">
    
  
<link rel="stylesheet" href="/css/style.css">

  
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <main class="content" >
    <section class="outer" style="min-height: 90vh;">
  <article  id="post-minatosys_Blockchain_note" class="article article-type-post" itemscope
            itemprop="blogPost" data-scroll-reveal>

            <div class="article-inner" 
              <header class="article-header">
                
  
  <h1 class="article-title" itemprop="name">
    æ°´é—¨è½¦é™©çš„å¼€å‘è®°å½•ï¼ˆåŒºå—é“¾ï¼‰
  </h1>
  
  

              </header>
              

                
                  <div class="article-meta">
                    <a href="/2024/05/06/minatosys_Blockchain_note/" class="article-date">
  <time datetime="2024-05-06T08:10:00.000Z" itemprop="datePublished">2024-05-06</time>
</a>
                      
<div class="article-category">
  <a class="article-category-link" href="/categories/Web3/">Web3</a>
</div>

                  </div>
                  

                    
                      
<div class="tocbot" style="font-size: medium;"></div>

                        

                          <div class="article-entry" itemprop="articleBody">
                            


                              

                                <!--  -->
                                
                                          <p>â€‹	è¯¥æ–‡æ¡£ä¸ºæ°´é—¨è½¦é™©çš„åŒºå—é“¾éƒ¨åˆ†ï¼Œè®°å½•äº†æ°´é—¨è½¦é™©åœ¨åŒºå—é“¾è¿™ä¸ªæ¨¡å—çš„å¼€å‘ä»¥åŠéƒ¨ç½²è¿‡ç¨‹ï¼Œè¯­è¨€æ–¹é¢ä½¿ç”¨äº†Solidityã€‚è¯­æ³•æ¥è¿‘jsï¼Œä¸Šæ‰‹è¾ƒä¸ºå®¹æ˜“ã€‚åˆçº¦çš„éƒ¨ç½²åˆ™ä»‹ç»äº†ä¸¤ç§æ–¹å¼ï¼ŒRemixä»¥åŠHardhatã€‚</p>
<span id="more"></span>

<blockquote>
<ul>
<li>Created by Typora</li>
<li>Author: LRay-iu</li>
<li>createTime: 2024-03-09 14:12</li>
<li>updateTime: 2024-05-06 16:10</li>
</ul>
</blockquote>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™ä¸ªæ–‡æ¡£è®°å½•äº†<strong>æ°´é—¨è½¦é™©åŒºå—é“¾æ¨¡å—</strong>çš„å¼€å‘è¿‡ç¨‹ã€‚</p>
<p>å†…å®¹æ˜¯åŸºäºåŒºå—é“¾æŠ€æœ¯å¼€å‘çš„ä¸€ä¸ªè½¦é™©ç³»ç»Ÿï¼Œå…³äºåŒºå—é“¾çš„çš„æ¦‚å¿µè¯¦è§å…¶ä»–markdownï¼›</p>
<p>è¿™ä¸ªç³»ç»Ÿå¹¶æ²¡æœ‰å¾€å®é™…ä½¿ç”¨çš„æ–¹å‘å¼€å‘ï¼Œçº¯ç²¹æ˜¯åº”ä»˜æ¯•ä¸šè®¾è®¡æ‰€å‡†å¤‡çš„ï¼Œå› æ­¤å¯èƒ½å­˜åœ¨å¾ˆå¤šä¸åˆç†çš„è®¾è®¡æˆ–è€…æ˜¯å¥‡å¥‡æ€ªæ€ªçš„bugsï¼Œæ€»ä¹‹ï¼Œä¸€åˆ‡åŠªåŠ›åªä¸ºèƒ½å¤Ÿé€šè¿‡æ¯•è®¾è€ƒæ ¸ã€‚</p>
<p>æ•´ä¸ªé¡¹ç›®æš‚å®šåˆ†æˆä¸‰ä¸ªæ¨¡å—ï¼Œå‰ç«¯ã€åç«¯ã€åŒºå—é“¾ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">D:.</span><br><span class="line">â”œâ”€gin-minato</span><br><span class="line">â”œâ”€hardhat-minato</span><br><span class="line">â””â”€vue-minato</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¶æ„è®¾è®¡</li>
</ul>
<img src="/2024/05/06/minatosys_Blockchain_note/image-20240423222551537.png" alt="image-20240423222551537" style="zoom:67%;">

<p>go ~ go ~ goï¼</p>
<h2 id="å·¥å…·åŒ…"><a href="#å·¥å…·åŒ…" class="headerlink" title="å·¥å…·åŒ…"></a>å·¥å…·åŒ…</h2><p>Remixç½‘å€ï¼š<a target="_blank" rel="noopener" href="https://remix.ethereum.org/">https://remix.ethereum.org/</a></p>
<p>æµ‹è¯•å¸æ°´é¾™å¤´ï¼š<a target="_blank" rel="noopener" href="https://faucets.chain.link/">https://faucets.chain.link</a></p>
<p>SepoliaåŒºå—é“¾æµè§ˆå™¨ï¼š<a target="_blank" rel="noopener" href="https://sepolia.etherscan.io/">https://sepolia.etherscan.io/</a></p>
<p>Chainlinkå®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://docs.chain.link/">https://docs.chain.link</a></p>
<p>ä»¥å¤ªåŠè´§å¸æ¢ç®—ï¼š<a target="_blank" rel="noopener" href="https://eth-converter.com/">https://eth-converter.com/</a></p>
<p>Solidity ä½¿ç”¨æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://solidity-by-example.org/">https://solidity-by-example.org</a></p>
<h2 id="åŒºå—é“¾"><a href="#åŒºå—é“¾" class="headerlink" title="åŒºå—é“¾"></a>åŒºå—é“¾</h2><h3 id="åˆçº¦"><a href="#åˆçº¦" class="headerlink" title="åˆçº¦"></a>åˆçº¦</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity 0.8.7;</span><br><span class="line"></span><br><span class="line">import &quot;@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol&quot;;</span><br><span class="line">import &quot;./PriceConverter.sol&quot;;</span><br><span class="line"></span><br><span class="line">// EVM, Ethereum Virtual Machine</span><br><span class="line">error NotOwner();</span><br><span class="line"></span><br><span class="line">contract Minatosys &#123;</span><br><span class="line">    using PriceConverter for uint256;</span><br><span class="line">    uint256 constant minimumUsd = 0;</span><br><span class="line">    address public immutable i_owner;</span><br><span class="line">    AggregatorV3Interface public priceFeed;</span><br><span class="line"></span><br><span class="line">    constructor(address priceFeedAddress) &#123;//æ„é€ ï¼Œåˆçº¦éƒ¨ç½²æ—¶éœ€è¦å‘å®ƒä¼ å…¥ä»¥ä¸‹å‚æ•°</span><br><span class="line">        i_owner = msg.sender;</span><br><span class="line">        priceFeed = AggregatorV3Interface(priceFeedAddress);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function fund() public payable &#123;//èµ„é‡‘æ³¨å…¥æ–¹æ³•</span><br><span class="line">        require(</span><br><span class="line">            msg.value.getConversionRate(priceFeed) &gt; 0,//åˆ¤æ–­é‡‘é¢æ˜¯å¦å¤§äº0ï¼Œå¦åˆ™ä¼šå›æ»šäº¤æ˜“</span><br><span class="line">            &quot;Didn&#x27;t send enough&quot;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function withdraw() public onlyOwner &#123;</span><br><span class="line">        (bool callSuccess, ) = payable(msg.sender).call&#123;//æå–èµ„é‡‘ï¼Œéåˆçº¦éƒ¨ç½²è´¦æˆ·ä¸èƒ½è°ƒç”¨è¿™ä¸ªæ–¹æ³•</span><br><span class="line">            value: address(this).balance</span><br><span class="line">        &#125;(&quot;&quot;);</span><br><span class="line">        require(callSuccess, &quot;call failed&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ç®¡ç†å‘˜è½¬è´¦</span><br><span class="line">    function withdrawToAddress(</span><br><span class="line">        address payable _to,</span><br><span class="line">        uint256 _amount</span><br><span class="line">    ) public onlyOwner &#123;//æå–èµ„é‡‘ï¼Œéåˆçº¦éƒ¨ç½²è´¦æˆ·ä¸èƒ½è°ƒç”¨è¿™ä¸ªæ–¹æ³•</span><br><span class="line">        // æ£€æŸ¥ç›®æ ‡åœ°å€æ˜¯å¦æœ‰æ•ˆ</span><br><span class="line">        require(_to != address(0), &quot;Invalid address&quot;);</span><br><span class="line">        // æ£€æŸ¥åˆçº¦ä½™é¢æ˜¯å¦è¶³å¤Ÿæ”¯ä»˜è½¬è´¦é‡‘é¢</span><br><span class="line">        require(address(this).balance &gt;= _amount, &quot;Insufficient balance&quot;);</span><br><span class="line">        // ä½¿ç”¨ call æ–¹æ³•å‘ç›®æ ‡åœ°å€å‘é€ä»¥å¤ªå¸</span><br><span class="line">        // è®¾ç½®å‘é€è€…ä¸ºåˆçº¦çš„æ‰€æœ‰è€…</span><br><span class="line">        (bool callSuccess, ) = _to.call&#123;value: _amount&#125;(&quot;&quot;);</span><br><span class="line">        // æ£€æŸ¥è°ƒç”¨æ˜¯å¦æˆåŠŸ</span><br><span class="line">        require(callSuccess, &quot;Call failed&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è«åå…¶å¦™åœ°æ”¶åˆ°é’±å°±æ‰§è¡Œä¸‹é¢ä¸¤ä¸ªæ–¹æ³•</span><br><span class="line">    receive() external payable &#123;</span><br><span class="line">        fund();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fallback() external payable &#123;</span><br><span class="line">        fund();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // è‡ªå®šä¹‰ä¿®é¥°ç¬¦ï¼Œå¸¦ä¸Šè¿™ä¸ªæ ‡ç­¾çš„æ–¹æ³•å°†åªå¯¹åˆçº¦å‘å¸ƒè€…å¼€æ”¾ä½¿ç”¨æƒé™</span><br><span class="line">    modifier onlyOwner() &#123;</span><br><span class="line">        require(</span><br><span class="line">            msg.sender == address(0) || msg.sender == i_owner,</span><br><span class="line">            &quot;Sender is not owner&quot;</span><br><span class="line">        );</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åº“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity 0.8.7;</span><br><span class="line">import &quot;@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol&quot;;</span><br><span class="line"></span><br><span class="line">library PriceConverter &#123;</span><br><span class="line">    function getPrice(</span><br><span class="line">        AggregatorV3Interface priceFeed</span><br><span class="line">    ) internal view returns (uint256) &#123;</span><br><span class="line">        //å¾—åˆ°æ±‡ç‡(USD/ETH)</span><br><span class="line">        //ABIw</span><br><span class="line">        //Address 0x694AA1769357215DE4FAC081bf1f309aDC325306</span><br><span class="line">        // AggregatorV3Interface priceFeed = AggregatorV3Interface(</span><br><span class="line">        //     0x694AA1769357215DE4FAC081bf1f309aDC325306</span><br><span class="line">        // );</span><br><span class="line">        (, int256 answer, , , ) = priceFeed.latestRoundData();</span><br><span class="line"></span><br><span class="line">        return uint256(answer * 1e10);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function getVersion() internal view returns (uint256) &#123;</span><br><span class="line">        //è·å–äº†é“¾å¤–æ•°æ®æºçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶å°†å…¶ä½œä¸ºuint256ç±»å‹è¿”å›</span><br><span class="line">        AggregatorV3Interface priceFeed = AggregatorV3Interface(</span><br><span class="line">            0x694AA1769357215DE4FAC081bf1f309aDC325306</span><br><span class="line">        );</span><br><span class="line">        return priceFeed.version();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function getConversionRate(</span><br><span class="line">        uint256 ethAmount,</span><br><span class="line">        AggregatorV3Interface priceFeed</span><br><span class="line">    ) internal view returns (uint256) &#123;</span><br><span class="line">        uint256 ethPrice = getPrice(priceFeed);</span><br><span class="line">        uint256 ethAmountInUsd = (ethPrice * ethAmount) / 1e18;</span><br><span class="line">        return ethAmountInUsd;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å…·ä½“å†™æ³•ä»¥åŠsolidityçš„è¯­æ³•å¯ä»¥å‚è€ƒã€ŠPatrick Collins-åŒºå—é“¾å­¦ä¹ ç¬”è®°ã€‹</p>
<h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><h4 id="Remix"><a href="#Remix" class="headerlink" title="Remix"></a>Remix</h4><p>æœ‰ä¸¤ç§éƒ¨ç½²æ–¹æ³•ï¼Œè¿™è¾¹å¼ºåŠ›æ¨èä½¿ç”¨<strong>Remix</strong>ï¼ŒçœŸçš„å¾ˆæ–¹ä¾¿ï¼Œåˆçº¦è¾“è¿›å»å¯ä»¥ç›´æ¥éƒ¨ç½²ï¼Œéå¸¸é€‚åˆéœ€æ±‚ä¸é«˜çš„åˆçº¦éƒ¨ç½²ï¼Œå”¯ä¸€ç¼ºç‚¹å°±æ˜¯ç½‘é€Ÿä¼¼ä¹ä¸å¤ªç†æƒ³ï¼Œç»å¸¸é“¾æ¥é’±åŒ…å’Œæµ‹è¯•ç½‘è¿æ¥ä¸ä¸Šã€‚</p>
<p>å¦‚æœä½¿ç”¨Remixçš„è¯ï¼ŒåŸºæœ¬ä¸Šåˆ°æ­¤å°±ç»“æŸäº†ğŸ˜‚è¾“å…¥å–‚ä»·åœ°å€ä¹‹åï¼Œç›´æ¥deployå°±è¡Œï¼Œå–‚ä»·åœ°å€å¯ä»¥ä»Chainlinké‚£é‡Œè·å–ï¼Œæ­¤å¤„å¯ä»¥è¯•ç€ä½¿ç”¨Sepoliaçš„å–‚ä»·åœ°å€ï¼š<code>0x694AA1769357215DE4FAC081bf1f309aDC325306(è¿™ä¸ªä¸ä¿çœŸï¼Œå¯èƒ½ä¼šæ›´æ–°æ¢ä»£ï¼Œè¿˜æ˜¯å»ºè®®è‡ªå·±å»å®˜ç½‘è·å–)</code></p>
<p><em>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒPatrick Collinsæ˜¯ä»–ä»¬çš„å¼€å‘è€…å¤§ä½¿ï¼Œè¢«è¯·æ¥å½•åˆ¶çš„è¯¾ç¨‹å¹¶ä¸”è¢«Chainlink_cnç¿»è¯‘æˆä¸­æ–‡æ”¾åœ¨Bç«™ä¸Šä¾›å¤§å®¶å­¦ä¹ ï¼Œå†…å®¹è¿˜æ˜¯å¾ˆæ–°é²œä¸”ç»å¸¸æ›´æ–°çš„ï¼Œå€¼å¾—åˆå­¦è€…å»è§‚çœ‹ã€‚å¦å¤–ï¼Œä»–ä»¬åœ¨Githubä¸Šè¿˜æœ‰ä¸€ä¸ªç¤¾åŒºï¼Œå¯ä»¥ä¾›å¤§å®¶æé—®ï¼Œè™½ç„¶æˆ‘é—®äº†ä½†æ˜¯æ²¡æœ‰å¾—åˆ°è§£ç­”ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œæœ‰æ€»æ¯”æ²¡æœ‰å¼ºğŸ˜­</em></p>
<img src="/2024/05/06/minatosys_Blockchain_note/image-20240423231604679.png" alt="image-20240423231604679" style="zoom:80%;">

<p>æœ¬é¡¹ç›®ä½¿ç”¨äº†ç¬¬äºŒç§æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š</p>
<h4 id="Hardhat"><a href="#Hardhat" class="headerlink" title="Hardhat"></a>Hardhat</h4><p>Hardhatæ˜¯ä¸€ä¸ªè½»é‡çº§çš„åˆçº¦éƒ¨ç½²æ¡†æ¶ï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥å®‰è£…è‡ªå·±éœ€è¦çš„æ’ä»¶ï¼Œè¿™å¯¹äºé«˜çº§å¼€å‘æ¥è¯´æ˜¯éå¸¸ä½¿ç”¨çš„ï¼ŒåŒ…æ‹¬prettierè¿™æ ·çš„ä»£ç æ ¼å¼åŒ–æ’ä»¶ç­‰ç­‰ï¼›å¹¶ä¸”å¯ä»¥è‡ªè¡Œç¼–å†™è„šæœ¬ï¼ŒåŒ…æ‹¬éƒ¨ç½²è„šæœ¬ä»¥åŠæµ‹è¯•è„šæœ¬ç­‰ç­‰ç­‰ç­‰</p>
<p>ä½†æ˜¯Hardhatè²Œä¼¼ï¼Ÿæ›´æ–°èµ·æ¥ï¼Œæ–‡æ¡£æœ‰æ—¶ä¼šè·Ÿä¸ä¸Šï¼Œè¿™ä¼šå¯¼è‡´å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œå¯èƒ½çœ‹æ–‡æ¡£å¹¶ä¸ä¼šæœ‰å¾ˆå¥½çš„ä½“éªŒï¼Œã€å·®ç‚¹æŠŠæˆ‘æŠ˜ç£¨ç–¯äº†ã€‘ï¼Œ</p>
<p>å³ä¾¿æ˜¯2å¹´å†…å½•åˆ¶çš„è¯¾ç¨‹ï¼Œå®é™…æ“ä½œæ—¶ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚å› æ­¤ï¼Œå¦‚æœä½ æ˜¯ä¸€åæƒ³ç”¨åŒºå—é“¾æ¥å®Œæˆæ¯•ä¸šè®¾è®¡ä¹‹ç±»çš„é¡¹ç›®ï¼Œå¼ºåŠ›æ¨èRemixã€‚</p>
<p>Hardhatéƒ¨ç½²æ‰€éœ€çš„æ’ä»¶ä»¥åŠæ­å»ºè¿‡ç¨‹è¿™é‡Œä¸åšèµ˜è¿°ï¼Œè¯¦æƒ…è¯·è§ã€ŠPatrick Collins-åŒºå—é“¾ ç¬”è®°ã€‹ï¼Œè¿™é‡Œåªç®€å•è¯´æ˜éƒ¨ç½²è¿‡ç¨‹ä»¥åŠåˆçº¦å†…å®¹</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">  |-- artifacts			#ç¼–è¯‘ç»“æœä¿å­˜ï¼ŒåŒ…æ‹¬ABIç­‰ç­‰</span><br><span class="line">  |-- cache				#Hardhatæ¡†æ¶ç”Ÿæˆçš„ç¼“å­˜æ–‡ä»¶</span><br><span class="line">  |-- contracts			#åˆçº¦ä»¥åŠå–‚ä»·åˆçº¦ç­‰ç­‰</span><br><span class="line">  |-- deploy			#éƒ¨ç½²åˆçº¦çš„è„šæœ¬</span><br><span class="line">  |-- deployments		#å·²ç»éƒ¨ç½²çš„åˆçº¦çš„ç›¸å…³æ•°æ®ï¼Œæ¯”å¦‚éƒ¨ç½²æ—¶äº§ç”Ÿçš„åœ°å€ã€äº¤æ˜“å“ˆå¸Œç­‰ä¿¡æ¯</span><br><span class="line">  |-- ignition			#Hardhatæ¡†æ¶çš„ä¸€äº›é…ç½®æ–‡ä»¶æˆ–æ¨¡æ¿æ–‡ä»¶</span><br><span class="line">  |-- node_modules		#ä¾èµ–</span><br><span class="line">  |-- test				#æµ‹è¯•æ–‡ä»¶å¤¹ï¼ŒåŒ…å«ä¸€äº›æµ‹è¯•è„šæœ¬</span><br><span class="line">  |-- utils				#è¾…åŠ©å¼€å‘çš„å·¥å…·å‡½æ•°æˆ–è¾…åŠ©è„šæœ¬æ–‡ä»¶ï¼Œæ¯”å¦‚verify.jsç­‰ç­‰</span><br><span class="line">  |-- package.json		#ä¾èµ–ç®¡ç†</span><br><span class="line">  |-- hardhat.config.js	#æ¡†æ¶é…ç½®æ–‡ä»¶</span><br><span class="line">  |-- helper-hardhat-config.js	#è¾…åŠ©æ¡†æ¶é…ç½®æ–‡ä»¶</span><br><span class="line">  |-- yarn.lock</span><br><span class="line">  \-- README.md</span><br><span class="line"></span><br><span class="line">9 directories, 5 files</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ¡†æ¶é…ç½®ä¿¡æ¯<code>hardhat.config.js</code>ï¼ŒåŒ…æ‹¬ç¼–è¯‘å™¨ç‰ˆæœ¬ï¼Œè´¦æˆ·ç§é’¥ç­‰ç­‰ä¿¡æ¯</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&quot;@nomicfoundation/hardhat-toolbox&quot;</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;hardhat-deploy&quot;</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;dotenv&quot;</span>).<span class="title function_">config</span>();</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;hardhat-gas-reporter&quot;</span>);</span><br><span class="line"><span class="comment">/** <span class="doctag">@type</span> import(&#x27;hardhat/config&#x27;).HardhatUserConfig */</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">SEPOLIA_RPC_URL</span> = process.<span class="property">env</span>.<span class="property">SEPOLIA_RPC_URL</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PRIVATE_KEY</span> = process.<span class="property">env</span>.<span class="property">PRIVATE_KEY</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">ETHERSCAN_API_KEY</span> = process.<span class="property">env</span>.<span class="property">ETHERSCAN_API_KEY</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">solidity</span>: &#123;</span><br><span class="line">    <span class="attr">compilers</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">version</span>: <span class="string">&quot;0.8.7&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">version</span>: <span class="string">&quot;0.6.6&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">defaultNetwork</span>: <span class="string">&quot;hardhat&quot;</span>,</span><br><span class="line">  <span class="attr">networks</span>: &#123;</span><br><span class="line">    <span class="attr">hardhat</span>: &#123;</span><br><span class="line">      <span class="attr">chainId</span>: <span class="number">31337</span>,</span><br><span class="line">      <span class="comment">// gasPrice: 130000000000,</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">sepolia</span>: &#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="variable constant_">SEPOLIA_RPC_URL</span>,</span><br><span class="line">      <span class="attr">accounts</span>: [<span class="variable constant_">PRIVATE_KEY</span>],</span><br><span class="line">      <span class="attr">chainId</span>: <span class="number">11155111</span>,</span><br><span class="line">      <span class="attr">blockConfirmations</span>: <span class="number">6</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">gasReporter</span>: &#123;</span><br><span class="line">    <span class="attr">enabled</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">currency</span>: <span class="string">&quot;USD&quot;</span>,</span><br><span class="line">    <span class="attr">outputFile</span>: <span class="string">&quot;gas-report.txt&quot;</span>,</span><br><span class="line">    <span class="attr">noColors</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// coinmarketcap: COINMARKETCAP_API_KEY,</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">etherscan</span>: &#123;</span><br><span class="line">    <span class="attr">apiKey</span>: <span class="variable constant_">ETHERSCAN_API_KEY</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">namedAccounts</span>: &#123;</span><br><span class="line">    <span class="attr">deployer</span>: &#123;</span><br><span class="line">      <span class="attr">default</span>: <span class="number">0</span>, <span class="comment">// here this will by default take the first account as deployer</span></span><br><span class="line">      <span class="number">1</span>: <span class="number">0</span>, <span class="comment">// similarly on mainnet it will take the first account as deployer. Note though that depending on how hardhat network are configured, the account 0 on one network can be different than on another</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mocha</span>: &#123;</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">500000</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="æœ¬åœ°ç½‘"><a href="#æœ¬åœ°ç½‘" class="headerlink" title="æœ¬åœ°ç½‘"></a>æœ¬åœ°ç½‘</h5><p>ä¹Ÿå°±æ˜¯<code>Hardhat</code>è‡ªå¸¦çš„æœ¬åœ°ç½‘ç»œï¼Œä¼˜ç‚¹æ˜¯ï¼Œæµ‹è¯•å¸å¾ˆå¤šï¼Œå¯ä»¥éšæ„éœéœï¼Œäº¤æ˜“é€Ÿåº¦éå¸¸å¿«è€Œä¸”ä¸å®¹æ˜“å‡ºå²”å­</p>
<p>ä½†æ˜¯ï¼Œæœ¬åœ°ç½‘ç»œæ˜¯æ— æ³•è·å–å–‚ä»·åˆçº¦çš„ï¼Œæ¢å¥è¯è¯´Chainlinké¢„è¨€æœºåœ¨è¿™æ–¹é¢å¹¶ä¸èƒ½ç»™äºˆä½ å¸®åŠ©ï¼Œå› æ­¤ï¼Œåœ¨éƒ¨ç½²ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆéƒ¨ç½²ä¸€ä¸ªè™šæ‹Ÿçš„å–‚ä»·åˆçº¦ï¼Œè¿™é‡Œå¹¶ä¸å®Œå…¨éœ€è¦è‡ªå·±å»å†™ï¼Œåœ¨<code>chainlink</code>çš„<code>github</code>ä¸­ä»”ç»†ç¿»æ‰¾å¯ä»¥æ‰¾åˆ°<code>node_modules\@chainlink\contracts\src\v0.6\tests\MockV3Aggregator.sol</code>ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å–‚ä»·åˆçº¦ä¸­ç›´æ¥å¼•å…¥ï¼Œæ•ˆæœç­‰åŒäºå¤åˆ¶ç²˜è´´ï¼›</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//SPDX-License-Identifier:MIT</span><br><span class="line">pragma solidity ^0.6.0;</span><br><span class="line"></span><br><span class="line">import &quot;@chainlink/contracts/src/v0.6/tests/MockV3Aggregator.sol&quot;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¹‹åæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç€æ‰‹å‡†å¤‡éƒ¨ç½²åˆçº¦çš„è„šæœ¬äº†ï¼›</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†å–‚ä»·åˆçº¦ä»¥åŠåˆçº¦çš„chainIDï¼Œä¹Ÿå°±æ˜¯ç”¨äºåˆ¤æ–­åˆçº¦è¢«éƒ¨ç½²åœ¨äº†å“ªæ¡é“¾ä¸Š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//helper-hardhat-config.js</span></span><br><span class="line"><span class="keyword">const</span> networkConfig = &#123;</span><br><span class="line">    <span class="number">31337</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Price Feed Address, values can be obtained at https://docs.chain.link/data-feeds/price-feeds/addresses</span></span><br><span class="line">    <span class="number">11155111</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;sepolia&quot;</span>,</span><br><span class="line">        <span class="attr">ethUsdPriceFeed</span>: <span class="string">&quot;0x694AA1769357215DE4FAC081bf1f309aDC325306&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> developmentChains = [<span class="string">&quot;hardhat&quot;</span>, <span class="string">&quot;localhost&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    networkConfig,</span><br><span class="line">    developmentChains,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å…ˆå°†æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„å–‚ä»·åˆçº¦å‘å¸ƒåˆ°<code>Hardhat</code>é“¾ä¸Š,è¿™æ ·æˆ‘ä»¬éƒ¨ç½²çš„åˆçº¦å°±å¯ä»¥é€šè¿‡æœ¬åœ°é“¾ä¸Šçš„å–‚ä»·åˆçº¦å¾—åˆ°USD&#x2F;ETHçš„æ±‡ç‡<br>è¿™é‡Œè„šæœ¬åšäº†ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœ<code>chainID</code>ä¸º<code>31337</code>ï¼Œä¹Ÿå°±æ˜¯å¤„äºå¼€å‘é“¾ä¸Šæ—¶ï¼Œä¼šå¯¹åˆçº¦è¿›è¡Œéƒ¨ç½²</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//00-deploy-mocks.js</span></span><br><span class="line"><span class="comment">//è¿™æ®µæ˜¯éƒ¨ç½²æœ¬åœ°é¢„è¨€æœº</span></span><br><span class="line"><span class="keyword">const</span> &#123; network &#125; = <span class="built_in">require</span>(<span class="string">&quot;hardhat&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">DECIMALS</span> = <span class="string">&quot;8&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">INITIAL_PRICE</span> = <span class="string">&quot;200000000000&quot;</span>; <span class="comment">// 2000</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">async</span> (&#123; getNamedAccounts, deployments &#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; deploy, log &#125; = deployments;</span><br><span class="line">  <span class="keyword">const</span> &#123; deployer &#125; = <span class="keyword">await</span> <span class="title function_">getNamedAccounts</span>();</span><br><span class="line">  <span class="keyword">const</span> chainId = network.<span class="property">config</span>.<span class="property">chainId</span>;</span><br><span class="line">  <span class="title function_">log</span>(network.<span class="property">name</span>);</span><br><span class="line">  <span class="keyword">if</span> (chainId == <span class="number">31337</span>) &#123;</span><br><span class="line">    <span class="title function_">log</span>(<span class="string">&quot;Local network detected!Deploying mocks...&quot;</span>);</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">deploy</span>(<span class="string">&quot;MockV3Aggregator&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">contract</span>: <span class="string">&quot;MockV3Aggregator&quot;</span>,</span><br><span class="line">      <span class="attr">from</span>: deployer,</span><br><span class="line">      <span class="attr">log</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">args</span>: [<span class="variable constant_">DECIMALS</span>, <span class="variable constant_">INITIAL_PRICE</span>],</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="title function_">log</span>(<span class="string">&quot;Mocks deployed!&quot;</span>);</span><br><span class="line">    <span class="title function_">log</span>(<span class="string">&quot;--------------------------------------------------------&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// è¿™æ®µä»£ç æŒ‡å®šäº†å½“å‰éƒ¨ç½²è„šæœ¬ç›¸å…³çš„æ ‡ç­¾ã€‚åœ¨è¿™é‡Œï¼Œä½¿ç”¨äº†ä¸¤ä¸ªæ ‡ç­¾ï¼š&quot;all&quot; å’Œ &quot;mocks&quot;ã€‚</span></span><br><span class="line"><span class="comment">// &quot;all&quot; æ ‡ç­¾ï¼š è¿™ä¸ªæ ‡ç­¾å¯èƒ½ç”¨äºå°†éƒ¨ç½²è„šæœ¬ä¸æ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰éƒ¨ç½²ä»»åŠ¡å…³è”èµ·æ¥ã€‚</span></span><br><span class="line"><span class="comment">// å½“è¿è¡Œ npx hardhat deploy --tags all æ—¶ï¼Œå°†è¿è¡Œæ‰€æœ‰å¸¦æœ‰ &quot;all&quot; æ ‡ç­¾çš„éƒ¨ç½²ä»»åŠ¡ã€‚</span></span><br><span class="line"><span class="comment">// &quot;mocks&quot; æ ‡ç­¾ï¼š è¿™ä¸ªæ ‡ç­¾å¯èƒ½ç”¨äºå°†éƒ¨ç½²è„šæœ¬ä¸ä¸æ¨¡æ‹Ÿåˆçº¦ç›¸å…³çš„å…¶ä»–éƒ¨ç½²ä»»åŠ¡å…³è”èµ·æ¥ã€‚</span></span><br><span class="line"><span class="comment">// å½“è¿è¡Œ npx hardhat deploy --tags mocks æ—¶ï¼Œå°†è¿è¡Œæ‰€æœ‰å¸¦æœ‰ &quot;mocks&quot; æ ‡ç­¾çš„éƒ¨ç½²ä»»åŠ¡ã€‚</span></span><br><span class="line"><span class="comment">//yarn hardhat deploy --tags mocks</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">tags</span> = [<span class="string">&quot;all&quot;</span>, <span class="string">&quot;mocks&quot;</span>];</span><br></pre></td></tr></table></figure>

<p>æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦éƒ¨ç½²<strong>æ°´é—¨è½¦é™©</strong>çš„åˆçº¦ï¼Œè¿™é‡Œæ˜¯ç¬¬äºŒä¸ªè„šæœ¬</p>
<p>è„šæœ¬å¯¹é¢„è¨€æœºçš„é€‰æ‹©ä¸Šä¼šè¿›è¡Œä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœæ˜¯åœ¨å¼€å‘é“¾ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°é“¾ä¸Šï¼Œåˆ™ä¼šä½¿ç”¨å¼€å‘é“¾ä¸Šéƒ¨ç½²çš„å–‚ä»·åˆçº¦<code>MockV3Aggregator</code>ï¼Œåä¹‹å°±ä¼šæ ¹æ®chainIDï¼Œä»<code>networkConfig[chainId][&quot;ethUsdPriceFeed&quot;]</code>è·å–å–‚ä»·åœ°å€ï¼›</p>
<p>å¦å¤–ï¼Œå¦‚æœæ˜¯åœ¨éå¼€å‘é“¾ä¸Šï¼Œå¹¶ä¸”ä»¥å¤ªåŠAPI KEYè¢«æ­£ç¡®é…ç½®æ—¶ï¼Œä¼šè§¦å‘å¯¹åˆçº¦çš„éªŒè¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//01-deploy-fund-me.js</span></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">    networkConfig,</span><br><span class="line">    developmentChains,</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">&quot;../helper-hardhat-config.js&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; network &#125; = <span class="built_in">require</span>(<span class="string">&quot;hardhat&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; verify &#125; = <span class="built_in">require</span>(<span class="string">&quot;../utils/verify.js&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//hreä»£è¡¨hardhatè¿è¡Œç¯å¢ƒ</span></span><br><span class="line"><span class="comment">// module.exports = async (hre) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     const &#123;getNameAccounts,deployments&#125; = hre</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//node.jsçš„è¯­æ³•ç³–ï¼Œå†™æ³•ç­‰åŒäºä¸Šæ–¹çš„</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">async</span> (&#123; getNamedAccounts, deployments &#125;) =&gt; &#123;</span><br><span class="line">    <span class="comment">//å°†deployå’Œlogä»deploymentsè¿™ä¸ªå¯¹è±¡ä¸­æå–å‡ºæ¥ï¼Œç­‰åŒäº</span></span><br><span class="line">    <span class="comment">//const deploy = deployments.deploy;</span></span><br><span class="line">    <span class="comment">//const log = deployments.log</span></span><br><span class="line">    <span class="keyword">const</span> &#123; deploy, log &#125; = deployments</span><br><span class="line">    <span class="comment">//getNameAccounts() è¿”å›ä¸€ä¸ªåŒ…å« deployer å±æ€§çš„å¯¹è±¡ï¼Œç­‰åŒäº</span></span><br><span class="line">    <span class="comment">//const getNameAccountsResult = await getNameAccounts();</span></span><br><span class="line">    <span class="comment">//const deployer = getNameAccountsResult.deployer;</span></span><br><span class="line">    <span class="title function_">log</span>(<span class="string">&quot;Deploy Minatosys...&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> &#123; deployer &#125; = <span class="keyword">await</span> <span class="title function_">getNamedAccounts</span>()</span><br><span class="line">    <span class="keyword">const</span> chainId = network.<span class="property">config</span>.<span class="property">chainId</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//---------------ç¡®è®¤é¢„è¨€æœºåœ°å€-----------------</span></span><br><span class="line">    <span class="keyword">if</span> (developmentChains.<span class="title function_">includes</span>(network.<span class="property">name</span>)) &#123;</span><br><span class="line">        <span class="keyword">const</span> ethUsdAggregator = <span class="keyword">await</span> deployments.<span class="title function_">get</span>(<span class="string">&quot;MockV3Aggregator&quot;</span>)</span><br><span class="line">        ethUsdPriceFeedAddress = ethUsdAggregator.<span class="property">address</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ethUsdPriceFeedAddressçš„æ ¼å¼ï¼š0x694AA1769357215DE4FAC081bf1f309aDC325306</span></span><br><span class="line">        ethUsdPriceFeedAddress = networkConfig[chainId][<span class="string">&quot;ethUsdPriceFeed&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// log(ethUsdPriceFeedAddress);</span></span><br><span class="line">    <span class="comment">//-----------------deploy-----------------------</span></span><br><span class="line">    <span class="keyword">const</span> args = [ethUsdPriceFeedAddress]</span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">Minatosys</span> = <span class="keyword">await</span> <span class="title function_">deploy</span>(<span class="string">&quot;Minatosys&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">from</span>: deployer,</span><br><span class="line">        <span class="attr">args</span>: args, <span class="comment">//å–‚ä»·åœ°å€</span></span><br><span class="line">        <span class="attr">log</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">waitConfirmation</span>: network.<span class="property">config</span>.<span class="property">blockConfirmations</span> || <span class="number">1</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//-------------------verify-----------------------</span></span><br><span class="line">    <span class="comment">//å½“åˆçº¦éƒ¨ç½²ç½‘ç»œä¸æŒ‡å®šçš„ä¸ç¬¦æ—¶ä¼šè¿›è¡Œæ£€æŸ¥</span></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">        !developmentChains.<span class="title function_">includes</span>(network.<span class="property">name</span>) &amp;&amp;</span><br><span class="line">        process.<span class="property">env</span>.<span class="property">ETHERSCAN_API_KEY</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">//verify</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">verify</span>(<span class="title class_">Minatosys</span>.<span class="property">address</span>, args)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">log</span>(<span class="string">&quot;--------------------------------------------------------&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">tags</span> = [<span class="string">&quot;all&quot;</span>, <span class="string">&quot;minatosys&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å‘½ä»¤è¡Œè¿›è¡Œæœ¬åœ°é“¾éƒ¨ç½²ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PS D:\study_test\Minato_Sys\hardhat-Minato&gt; yarn hardhat deploy --network hardhat</span><br><span class="line">yarn run v1.22.21</span><br><span class="line">warning package.json: No license field</span><br><span class="line">$ D:\study_test\Minato_Sys\hardhat-Minato\node_modules\.bin\hardhat deploy --network hardhat</span><br><span class="line">Compiled 1 Solidity file successfully (evm target: london).</span><br><span class="line">hardhat</span><br><span class="line">Local network detected!Deploying mocks...</span><br><span class="line">deploying &quot;MockV3Aggregator&quot; (tx: 0x3d732abdeda8235691578f5eae48ec57c18e6860c18196ab7b211ca8f74dce2b)...: deployed at 0x5FbDB2315678afecb367f032d93F642f64180aa3 with 569759 gas</span><br><span class="line">Mocks deployed!</span><br><span class="line">--------------------------------------------------------</span><br><span class="line">Deploy Minatosys...</span><br><span class="line">deploying &quot;Minatosys&quot; (tx: 0x1756b51c675657ec993c19959606c37e39b7ef407cfa1e84177b93f0e4449881)...: deployed at 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512 with 839016 gas</span><br><span class="line">--------------------------------------------------------</span><br><span class="line">Done in 8.47s.</span><br></pre></td></tr></table></figure>

<h5 id="æµ‹è¯•ç½‘"><a href="#æµ‹è¯•ç½‘" class="headerlink" title="æµ‹è¯•ç½‘"></a>æµ‹è¯•ç½‘</h5><p>æµ‹è¯•ç½‘çš„éƒ¨ç½²ä¸éœ€è¦æ‰‹åŠ¨é…ç½®Mockåˆçº¦ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡å–‚ä»·åœ°å€è·å¾—åˆçº¦</p>
<p>ä½†æ˜¯å®Œæˆåœ¨æµ‹è¯•ç½‘çš„éƒ¨ç½²ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªéªŒè¯è„šæœ¬ï¼Œç”¨ä»¥æ£€æŸ¥è¢«éƒ¨ç½²çš„åˆçº¦ä¸æˆ‘ä»¬æƒ³éƒ¨ç½²çš„åˆçº¦æ˜¯å¦ä¸€è‡´ï¼Œé¿å…å‘ç”Ÿè¢«ç¯¡æ”¹çš„äº‹ä»¶ã€‚</p>
<p>è¿™é‡Œ<code>Hardhat</code>æ¡†æ¶æœ‰ä¸ºæˆ‘ä»¬æä¾›éªŒè¯æ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨å³å¯</p>
<p><code>verify:verify</code> æ˜¯ Hardhat æ¡†æ¶ä¸­çš„ä¸€ä¸ªä»»åŠ¡ï¼ˆtaskï¼‰ï¼Œå®ƒç”¨äºæ‰§è¡Œæ™ºèƒ½åˆçº¦çš„éªŒè¯è¿‡ç¨‹ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªä»»åŠ¡ä¼šå°†æ™ºèƒ½åˆçº¦çš„æºä»£ç å’Œéƒ¨ç½²ä¿¡æ¯æäº¤ç»™ä»¥å¤ªåŠçš„éªŒè¯æœåŠ¡ï¼ˆå¦‚ Etherscan æˆ–å…¶ä»–ç±»ä¼¼çš„æœåŠ¡ï¼‰ã€‚éªŒè¯æœåŠ¡å°†æ£€æŸ¥åˆçº¦çš„æºä»£ç æ˜¯å¦ä¸å·²éƒ¨ç½²çš„åˆçº¦åŒ¹é…ï¼Œä»¥åŠæ˜¯å¦åŒ…å«äº†æ­£ç¡®çš„æ„é€ å‡½æ•°å‚æ•°ã€‚</p>
<p><em>&#x2F;&#x2F;ä»¥ä¸Šè¯´æ³•æ¥è‡ªchatgptï¼Œä½†æ˜¯éªŒè¯éƒ¨åˆ†æˆ‘è®°å¾—æœ‰äº›ä¸å¤ªæ¸…æ¥šäº†ï¼Œå…·ä½“<code>Hardhat</code>æ˜¯æ€ä¹ˆå®Œæˆçš„ï¼Œæˆ‘ç¡®è®¤å¥½ä¹‹åä¼šè¿›è¡Œä¿®æ”¹ï¼›</em></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//verify.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; run &#125; = <span class="built_in">require</span>(<span class="string">&quot;hardhat&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">verify</span> = <span class="keyword">async</span> (<span class="params">contractAddress, args</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Verifying Contract...&quot;</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">run</span>(<span class="string">&quot;verify:verify&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">address</span>: contractAddress,</span><br><span class="line">      <span class="attr">constructorArguments</span>: args,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">message</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(<span class="string">&quot;already verified&quot;</span>)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Already Verified!&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; verify &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å‘½ä»¤è¡Œè¿›è¡Œæµ‹è¯•ç½‘éƒ¨ç½²ï¼ˆä»¥Sepoliaä¸ºä¾‹ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PS D:\study_test\Minato_Sys\hardhat-Minato&gt; yarn hardhat deploy --network sepolia</span><br><span class="line">yarn run v1.22.21</span><br><span class="line">warning package.json: No license field</span><br><span class="line">$ D:\study_test\Minato_Sys\hardhat-Minato\node_modules\.bin\hardhat deploy --network sepolia</span><br><span class="line">Compiled 1 Solidity file successfully (evm target: london).</span><br><span class="line">sepolia</span><br><span class="line">Deploy Minatosys...</span><br><span class="line">deploying &quot;Minatosys&quot; (tx: 0x5eeadc93ad11de1fc2cec56c48aa77eb2d3775cfa2a8769cc38cd75c783f6246)...: deployed at 0x03cDbE6020084eb013b02B8d8e0A90BE018fb39E with 806890 gas</span><br><span class="line">Verifying Contract...</span><br><span class="line">UnexpectedError: An unexpected error occurred during the verification process.</span><br><span class="line">Please report this issue to the Hardhat team.</span><br><span class="line">Error Details: Connect Timeout Error</span><br><span class="line">    at Etherscan.isVerified (D:\study_test\Minato_Sys\hardhat-Minato\node_modules\@nomicfoundation\hardhat-verify\src\internal\etherscan.ts:126:13)</span><br><span class="line">    at processTicksAndRejections (node:internal/process/task_queues:95:5)</span><br><span class="line">    at SimpleTaskDefinition.action (D:\study_test\Minato_Sys\hardhat-Minato\node_modules\@nomicfoundation\hardhat-verify\src\internal\tasks\etherscan.ts:101:24)</span><br><span class="line">    at Environment._runTaskDefinition (D:\study_test\Minato_Sys\hardhat-Minato\node_modules\hardhat\src\internal\core\runtime-environment.ts:359:14)</span><br><span class="line">    at Environment.run (D:\study_test\Minato_Sys\hardhat-Minato\node_modules\hardhat\src\internal\core\runtime-environment.ts:192:14)</span><br><span class="line">    at SimpleTaskDefinition.action (D:\study_test\Minato_Sys\hardhat-Minato\node_modules\@nomicfoundation\hardhat-verify\src\index.ts:284:9)</span><br><span class="line">    at Environment._runTaskDefinition (D:\study_test\Minato_Sys\hardhat-Minato\node_modules\hardhat\src\internal\core\runtime-environment.ts:359:14)</span><br><span class="line">    at Environment.run (D:\study_test\Minato_Sys\hardhat-Minato\node_modules\hardhat\src\internal\core\runtime-environment.ts:192:14)</span><br><span class="line">    at verify (D:\study_test\Minato_Sys\hardhat-Minato\utils\verify.js:6:5)</span><br><span class="line">    at Object.module.exports [as func] (D:\study_test\Minato_Sys\hardhat-Minato\deploy\01-deploy.js:61:7)</span><br><span class="line">--------------------------------------------------------</span><br><span class="line">Done in 85.66s.</span><br></pre></td></tr></table></figure>

<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>è‡³æ­¤ï¼Œæ°´é—¨è½¦é™©çš„åˆçº¦éƒ¨åˆ†å°±è¢«éƒ¨ç½²å®Œæˆäº†ï¼Œä¸ªäººè¿˜æ˜¯å¾ˆæ¨èä½¿ç”¨Remixçš„éƒ¨ç½²æ–¹å¼ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æœ‰æ„å‘æ·±å…¥å­¦ä¹ ä½¿ç”¨æ™ºèƒ½åˆçº¦ï¼Œé‚£Hardhatè¿™æ ·çš„æ¡†æ¶ä¹Ÿæ˜¯éå¸¸æœ‰å­¦ä¹ çš„ä»·å€¼</p>

                                            
                          </div>
                          <footer class="article-footer">
                            
<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Solidity/" rel="tag">Solidity</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%A5%E5%A4%AA%E5%9D%8A/" rel="tag">ä»¥å¤ªåŠ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/" rel="tag">åŒºå—é“¾</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/" rel="tag">æ™ºèƒ½åˆçº¦</a></li></ul>

                          </footer>

            </div>

            
              
<nav class="article-nav">
  
  <a href="/2024/06/04/wuxi_travel/" class="article-nav-link">
    <strong class="article-nav-caption">å‰ä¸€ç¯‡</strong>
    <div class="article-nav-title">
      
      æ— é”¡-å†›å¶‚å¤é“
      
    </div>
  </a>
  
  
  <a href="/2024/05/06/minatosys_FrontEnd_note/" class="article-nav-link">
    <strong class="article-nav-caption">åä¸€ç¯‡</strong>
    <div class="article-nav-title">æ°´é—¨è½¦é™©çš„å¼€å‘è®°å½•ï¼ˆå‰ç«¯ï¼‰</div>
  </a>
  
</nav>

                

                  
                    
                      
                        

</article>

<style>
  /* @font-face {
    font-family: 'SongHuiZongShouJinJiaCuBan-2';
    src: url("/css/songhuizong/SongHuiZongShouJinJiaCuBan-2.woff") format('woff'),
      url("/css/songhuizong/SongHuiZongShouJinJiaCuBan-2.ttf") format('truetype');
    font-weight: normal;
    font-style: normal;
  } */

  .article-inner {
    position: relative;
    overflow: hidden;
    /* ç¡®ä¿å†…å®¹ä¸ä¼šè¦†ç›–èƒŒæ™¯å›¾ */
  }

</style>
</section>
    
<footer class="footer">
  <div class="outer" style="display: inline-block;">
    <ul class="list-inline">
      <li>LRayçš„åšå®¢&nbsp;  |&nbsp; 2024</li><br>
      
        <li>
          
            <img src="/images/foot-logo.png"  style="width: 16px;">
            <a href="https://beian.miit.gov.cn/" target="_blank" style="text-decoration: none; color: rgba(0, 0, 0, 0.5);">
              çš–ICPå¤‡2024053806å·-1
            </a>
          
        </li><br>
      
      <li id="uptime">æœ¬ç«™å·²å®‰å…¨è¿è¡Œï¼š</li>
    </ul>
  </div>
</footer>

<script>
  // æ›´æ–°å¹¶å®æ—¶æ˜¾ç¤ºç«™ç‚¹è¿è¡Œæ—¶é•¿
  function updateUptime() {
    // è·å–ç½‘ç«™åˆ›å»ºæ—¶é—´ï¼Œè¿™é‡Œå‡è®¾ä½ æœ‰ä¸€ä¸ªå˜é‡æˆ–è€…å¸¸é‡å­˜å‚¨äº†ç½‘ç«™åˆ›å»ºæ—¶é—´
    var startDate = new Date('2024-04-28');
    
    // è®¡ç®—è¿è¡Œæ—¶é•¿
    var now = new Date();
    var uptime = now.getTime() - startDate.getTime();
    var seconds = Math.floor(uptime / 1000);
    var minutes = Math.floor(seconds / 60);
    var hours = Math.floor(minutes / 60);
    var days = Math.floor(hours / 24);
    
    // è®¡ç®—å‰©ä½™çš„å°æ—¶ã€åˆ†é’Ÿå’Œç§’æ•°
    hours %= 24;
    minutes %= 60;
    seconds %= 60;
    
    // æ›´æ–°é¡µé¢ä¸­çš„å…ƒç´ å†…å®¹
    var uptimeString = days + ' å¤©, ' + hours + ' å°æ—¶, ' + minutes + ' åˆ†é’Ÿ, ' + seconds + ' ç§’';
    document.getElementById('uptime').textContent = 'æœ¬ç«™å·²å®‰å…¨è¿è¡Œï¼š' + uptimeString;
  }
  
  // æ¯ç§’æ›´æ–°ä¸€æ¬¡è¿è¡Œæ—¶é•¿
  setInterval(updateUptime, 1000);
  
  // é¡µé¢åŠ è½½å®Œæˆåç«‹å³æ›´æ–°ä¸€æ¬¡
  updateUptime();
</script>
  </main>
  <aside class="sidebar">
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="https://lray-iu.oss-cn-hangzhou.aliyuncs.com/tenten.png" alt="LRayçš„åšå®¢" style="border-radius: 45px;"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/gallery">ç›¸å†Œ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/favorite">æ”¶è—</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/postcard">æ”¶é›†</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">å…³äº</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="æœç´¢">
        <i class="fe fe-search"></i>
        æœç´¢
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="æ‰‹æœºç«¯ä¼¼ä¹ä¸æ”¯æŒè¯¥åŠŸèƒ½ï¼Œæˆ‘æ·±æ„ŸæŠ±æ­‰">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>





<script src="/js/tocbot.min.js"></script>


<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
  });
</script>



<script src="/js/ocean.js"></script>

</body>

</html>